

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CureQ.mea_analysis_tool &mdash; MEA Analysis Tool 1.2.6 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=010db75e"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            MEA Analysis Tool
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">CureQ</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MEA Analysis Tool</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">CureQ.mea_analysis_tool</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for CureQ.mea_analysis_tool</h1><div class="highlight"><pre>
<span></span><span class="c1"># Imports</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">webbrowser</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">ttk</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">filedialog</span>
<span class="kn">from</span> <span class="nn">importlib.metadata</span> <span class="kn">import</span> <span class="n">version</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">traceback</span>

<span class="c1"># External libraries</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_tkagg</span> <span class="kn">import</span> <span class="p">(</span><span class="n">FigureCanvasTkAgg</span><span class="p">,</span>  <span class="n">NavigationToolbar2Tk</span><span class="p">)</span> 
<span class="kn">import</span> <span class="nn">h5py</span>
<span class="kn">import</span> <span class="nn">customtkinter</span> <span class="k">as</span> <span class="nn">ctk</span>
<span class="kn">from</span> <span class="nn">CTkToolTip</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">CTkMessagebox</span> <span class="kn">import</span> <span class="n">CTkMessagebox</span>
<span class="kn">from</span> <span class="nn">CTkColorPicker</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># Import the MEA library</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">.mea</span> <span class="kn">import</span> <span class="o">*</span>
<span class="k">except</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">mea</span> <span class="kn">import</span> <span class="o">*</span>


<div class="viewcode-block" id="MainApp">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.MainApp">[docs]</a>
<span class="k">class</span> <span class="nc">MainApp</span><span class="p">(</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTk</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Control frame selection and hold &#39;global&#39; variables.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Initialize GUI</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="c1"># Get icon - works for both normal and frozen</span>
        <span class="n">relative_path</span><span class="o">=</span><span class="s2">&quot;cureq_icon.ico&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">base_path</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">_MEIPASS</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">source_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">base_path</span> <span class="o">=</span> <span class="n">source_path</span><span class="o">.</span><span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icon_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_path</span><span class="p">,</span> <span class="n">relative_path</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iconbitmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">icon_path</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Could not load in icon&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

        <span class="c1"># &#39;Global&#39; variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="o">=</span><span class="mi">200</span>

        <span class="c1"># Colors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gray_1</span> <span class="o">=</span> <span class="s1">&#39;#333333&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gray_2</span> <span class="o">=</span> <span class="s1">&#39;#2b2b2b&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gray_3</span> <span class="o">=</span> <span class="s2">&quot;#3f3f3f&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gray_4</span> <span class="o">=</span> <span class="s2">&quot;#212121&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gray_5</span> <span class="o">=</span> <span class="s2">&quot;#696969&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gray_6</span> <span class="o">=</span> <span class="s2">&quot;#292929&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_gray</span> <span class="o">=</span> <span class="s2">&quot;#565b5e&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">text_color</span> <span class="o">=</span> <span class="s1">&#39;#dce4ee&#39;</span>

        <span class="c1"># Set theme from json</span>
        <span class="n">theme_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">&quot;theme.json&quot;</span><span class="p">)</span>
        
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">theme_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theme</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>

        <span class="n">ctk</span><span class="o">.</span><span class="n">set_default_color_theme</span><span class="p">(</span><span class="n">theme_path</span><span class="p">)</span>
        <span class="n">ctk</span><span class="o">.</span><span class="n">set_appearance_mode</span><span class="p">(</span><span class="s2">&quot;dark&quot;</span><span class="p">)</span>

        <span class="n">base_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkButton&quot;</span><span class="p">][</span><span class="s2">&quot;fg_color&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">primary_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mix_color</span><span class="p">(</span><span class="n">base_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gray_6</span><span class="p">,</span> <span class="n">factor</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">primary_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)</span>

        <span class="c1"># Initialize main frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">main_window</span><span class="p">)</span>

        <span class="c1"># The parent holds all the analysis parameters in a dict, which are here initialized with the default values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="n">get_default_parameters</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_parameters</span> <span class="o">=</span> <span class="n">get_default_parameters</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Successfully launched MEA Analysis Tool&quot;</span><span class="p">)</span>

    <span class="c1"># Handle frame switching</span>
<div class="viewcode-block" id="MainApp.show_frame">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.MainApp.show_frame">[docs]</a>
    <span class="k">def</span> <span class="nf">show_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_class</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">winfo_children</span><span class="p">():</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">frame_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">)</span> </div>


    <span class="c1"># Function to calculate the optimal grid</span>
<div class="viewcode-block" id="MainApp.calculate_optimal_grid">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.MainApp.calculate_optimal_grid">[docs]</a>
    <span class="k">def</span> <span class="nf">calculate_optimal_grid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_items</span><span class="p">):</span>
        <span class="n">min_difference</span> <span class="o">=</span> <span class="n">num_items</span>
        <span class="n">optimal_width</span> <span class="o">=</span> <span class="n">num_items</span>
        <span class="n">optimal_height</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">width</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">num_items</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">num_items</span> <span class="o">%</span> <span class="n">width</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">height</span> <span class="o">=</span> <span class="n">num_items</span> <span class="o">//</span> <span class="n">width</span>
                <span class="n">difference</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">width</span> <span class="o">-</span> <span class="n">height</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">difference</span> <span class="o">&lt;</span> <span class="n">min_difference</span><span class="p">:</span>
                    <span class="n">min_difference</span> <span class="o">=</span> <span class="n">difference</span>
                    <span class="n">optimal_width</span> <span class="o">=</span> <span class="n">width</span>
                    <span class="n">optimal_height</span> <span class="o">=</span> <span class="n">height</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">optimal_width</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">optimal_height</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="MainApp.adjust_color">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.MainApp.adjust_color">[docs]</a>
    <span class="k">def</span> <span class="nf">adjust_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hex_color</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
        <span class="n">hex_color</span> <span class="o">=</span> <span class="n">hex_color</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">hex_color</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span> <span class="mi">16</span><span class="p">)</span>
        <span class="n">g</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">hex_color</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">],</span> <span class="mi">16</span><span class="p">)</span> 
        <span class="n">b</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">hex_color</span><span class="p">[</span><span class="mi">4</span><span class="p">:],</span> <span class="mi">16</span><span class="p">)</span>
        
        <span class="n">r</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span> <span class="o">*</span> <span class="n">factor</span><span class="p">)))</span>
        <span class="n">g</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">g</span> <span class="o">*</span> <span class="n">factor</span><span class="p">)))</span>
        <span class="n">b</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span> <span class="o">*</span> <span class="n">factor</span><span class="p">)))</span>
        
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;#</span><span class="si">{</span><span class="n">r</span><span class="si">:</span><span class="s1">02x</span><span class="si">}{</span><span class="n">g</span><span class="si">:</span><span class="s1">02x</span><span class="si">}{</span><span class="n">b</span><span class="si">:</span><span class="s1">02x</span><span class="si">}</span><span class="s1">&#39;</span></div>


<div class="viewcode-block" id="MainApp.mix_color">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.MainApp.mix_color">[docs]</a>
    <span class="k">def</span> <span class="nf">mix_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hex_color1</span><span class="p">,</span> <span class="n">hex_color2</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
        <span class="c1"># Convert hex colors to RGB</span>
        <span class="n">hex_color1</span> <span class="o">=</span> <span class="n">hex_color1</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">)</span>
        <span class="n">hex_color2</span> <span class="o">=</span> <span class="n">hex_color2</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">)</span>
        
        <span class="c1"># Original color RGB</span>
        <span class="n">r1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">hex_color1</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span> <span class="mi">16</span><span class="p">)</span>
        <span class="n">g1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">hex_color1</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">],</span> <span class="mi">16</span><span class="p">)</span>
        <span class="n">b1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">hex_color1</span><span class="p">[</span><span class="mi">4</span><span class="p">:],</span> <span class="mi">16</span><span class="p">)</span>
        
        <span class="c1"># Gray color RGB</span>
        <span class="n">r2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">hex_color2</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span> <span class="mi">16</span><span class="p">)</span>
        <span class="n">g2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">hex_color2</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">],</span> <span class="mi">16</span><span class="p">)</span>
        <span class="n">b2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">hex_color2</span><span class="p">[</span><span class="mi">4</span><span class="p">:],</span> <span class="mi">16</span><span class="p">)</span>
        
        <span class="c1"># Mix colors based on factor</span>
        <span class="n">r</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">r1</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">factor</span><span class="p">)</span> <span class="o">+</span> <span class="n">r2</span> <span class="o">*</span> <span class="n">factor</span><span class="p">)</span>
        <span class="n">g</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">g1</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">factor</span><span class="p">)</span> <span class="o">+</span> <span class="n">g2</span> <span class="o">*</span> <span class="n">factor</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">b1</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">factor</span><span class="p">)</span> <span class="o">+</span> <span class="n">b2</span> <span class="o">*</span> <span class="n">factor</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;#</span><span class="si">{</span><span class="n">r</span><span class="si">:</span><span class="s1">02x</span><span class="si">}{</span><span class="n">g</span><span class="si">:</span><span class="s1">02x</span><span class="si">}{</span><span class="n">b</span><span class="si">:</span><span class="s1">02x</span><span class="si">}</span><span class="s1">&#39;</span></div>


<div class="viewcode-block" id="MainApp.set_theme">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.MainApp.set_theme">[docs]</a>
    <span class="k">def</span> <span class="nf">set_theme</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_color</span><span class="p">):</span>
        <span class="n">theme_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_path</span><span class="p">,</span> <span class="s2">&quot;theme.json&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">theme_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
            <span class="n">theme</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
        
        <span class="c1"># Edit all relevant widgets</span>
        <span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkButton&quot;</span><span class="p">][</span><span class="s2">&quot;fg_color&quot;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#3a7ebf&quot;</span><span class="p">,</span> <span class="n">base_color</span><span class="p">]</span>
        <span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkButton&quot;</span><span class="p">][</span><span class="s2">&quot;hover_color&quot;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#325882&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_color</span><span class="p">(</span><span class="n">base_color</span><span class="p">,</span> <span class="n">factor</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)]</span>

        <span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkCheckBox&quot;</span><span class="p">][</span><span class="s2">&quot;fg_color&quot;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#3a7ebf&quot;</span><span class="p">,</span> <span class="n">base_color</span><span class="p">]</span>
        <span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkCheckBox&quot;</span><span class="p">][</span><span class="s2">&quot;hover_color&quot;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#325882&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_color</span><span class="p">(</span><span class="n">base_color</span><span class="p">,</span> <span class="n">factor</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)]</span>

        <span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkEntry&quot;</span><span class="p">][</span><span class="s2">&quot;border_color&quot;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#325882&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mix_color</span><span class="p">(</span><span class="n">base_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_gray</span><span class="p">,</span> <span class="n">factor</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)]</span>

        <span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkComboBox&quot;</span><span class="p">][</span><span class="s2">&quot;border_color&quot;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#325882&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mix_color</span><span class="p">(</span><span class="n">base_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_gray</span><span class="p">,</span> <span class="n">factor</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)]</span>
        <span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkComboBox&quot;</span><span class="p">][</span><span class="s2">&quot;button_color&quot;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#325882&quot;</span><span class="p">,</span> <span class="n">base_color</span><span class="p">]</span>
        <span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkComboBox&quot;</span><span class="p">][</span><span class="s2">&quot;button_hover_color&quot;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#325882&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mix_color</span><span class="p">(</span><span class="n">base_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_gray</span><span class="p">,</span> <span class="n">factor</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)]</span>

        <span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkOptionMenu&quot;</span><span class="p">][</span><span class="s2">&quot;fg_color&quot;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#325882&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mix_color</span><span class="p">(</span><span class="n">base_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_gray</span><span class="p">,</span> <span class="n">factor</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)]</span>
        <span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkOptionMenu&quot;</span><span class="p">][</span><span class="s2">&quot;button_color&quot;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#325882&quot;</span><span class="p">,</span> <span class="n">base_color</span><span class="p">]</span>
        <span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkOptionMenu&quot;</span><span class="p">][</span><span class="s2">&quot;button_hover_color&quot;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#325882&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mix_color</span><span class="p">(</span><span class="n">base_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry_gray</span><span class="p">,</span> <span class="n">factor</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)]</span>
        
        <span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkSlider&quot;</span><span class="p">][</span><span class="s2">&quot;button_color&quot;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="n">base_color</span><span class="p">,</span> <span class="n">base_color</span><span class="p">]</span>
        <span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkSlider&quot;</span><span class="p">][</span><span class="s2">&quot;button_hover_color&quot;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">adjust_color</span><span class="p">(</span><span class="n">base_color</span><span class="p">,</span> <span class="n">factor</span><span class="o">=</span><span class="mf">0.6</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_color</span><span class="p">(</span><span class="n">base_color</span><span class="p">,</span> <span class="n">factor</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)]</span>

        <span class="c1"># Tabview buttons</span>
        <span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkSegmentedButton&quot;</span><span class="p">][</span><span class="s2">&quot;selected_color&quot;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#3a7ebf&quot;</span><span class="p">,</span> <span class="n">base_color</span><span class="p">]</span>
        <span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkSegmentedButton&quot;</span><span class="p">][</span><span class="s2">&quot;selected_hover_color&quot;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#325882&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_color</span><span class="p">(</span><span class="n">base_color</span><span class="p">,</span> <span class="n">factor</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)]</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">primary_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mix_color</span><span class="p">(</span><span class="n">base_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gray_6</span><span class="p">,</span> <span class="n">factor</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">primary_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">theme_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">theme</span><span class="p">,</span> <span class="n">json_file</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">ctk</span><span class="o">.</span><span class="n">set_default_color_theme</span><span class="p">(</span><span class="n">theme_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">theme</span><span class="o">=</span><span class="n">theme</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">main_window</span><span class="p">)</span></div>
</div>


<div class="viewcode-block" id="main_window">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.main_window">[docs]</a>
<span class="k">class</span> <span class="nc">main_window</span><span class="p">(</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main window and landing page for the user.</span>
<span class="sd">    Allows the user to switch to different frames to perform different tasks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span>

        <span class="n">parent</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;MEA Analysis Tool - Version: </span><span class="si">{</span><span class="n">version</span><span class="p">(</span><span class="s1">&#39;CureQ&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Weights</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Frame for the sidebar buttons</span>
        <span class="n">sidebarframe</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">sidebarframe</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="c1"># Switch themes</span>
        <span class="n">theme_switch</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">sidebarframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Theme&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">colorpicker</span><span class="p">)</span>
        <span class="n">theme_switch</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_color</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkButton&quot;</span><span class="p">][</span><span class="s2">&quot;fg_color&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">cureq_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">sidebarframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;CureQ project&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new</span><span class="p">(</span><span class="s2">&quot;https://cureq.nl/&quot;</span><span class="p">))</span>
        <span class="n">cureq_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="n">pypi_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">sidebarframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Library&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new</span><span class="p">(</span><span class="s2">&quot;https://pypi.org/project/CureQ/&quot;</span><span class="p">))</span>
        <span class="n">pypi_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="n">github_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">sidebarframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;GitHub&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new</span><span class="p">(</span><span class="s2">&quot;https://github.com/CureQ&quot;</span><span class="p">))</span>
        <span class="n">github_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Check for updates</span>
        <span class="n">installed_version</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_installed_version</span><span class="p">()</span>
        <span class="n">latest_version</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_latest_version</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">installed_version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">latest_version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">latest_version</span> <span class="o">!=</span> <span class="n">installed_version</span><span class="p">:</span>
                <span class="n">update_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">sidebarframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;A new version is available!</span><span class="se">\n</span><span class="s2">Click here to install it.&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">update_package</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="s2">&quot;#1d5200&quot;</span><span class="p">,</span> <span class="n">hover_color</span><span class="o">=</span><span class="s2">&quot;#0f2b00&quot;</span><span class="p">)</span>
                <span class="n">update_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Main button frame</span>
        <span class="n">main_buttons_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">main_buttons_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
        <span class="n">main_buttons_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">main_buttons_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">main_buttons_frame</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">main_buttons_frame</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Go to parameter_frame</span>
        <span class="n">to_parameters_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">main_buttons_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Set Parameters&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">parent</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">parameter_frame</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">160</span><span class="p">)</span>
        <span class="n">to_parameters_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># View results</span>
        <span class="n">view_results_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">main_buttons_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;View Results&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">parent</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">select_folder_frame</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">160</span><span class="p">)</span>
        <span class="n">view_results_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Batch processing</span>
        <span class="n">batch_processing_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">main_buttons_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Batch Processing&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">parent</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">batch_processing</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">160</span><span class="p">)</span>
        <span class="n">batch_processing_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># single file processing</span>
        <span class="n">process_file_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">main_buttons_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Process single file&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">parent</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">process_file_frame</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">160</span><span class="p">)</span>
        <span class="n">process_file_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Utility/plotting buttons</span>
        <span class="n">util_plot_button_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">util_plot_button_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="n">compression_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">util_plot_button_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Compress/Rechunk Files&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">parent</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">compress_files</span><span class="p">))</span>
        <span class="n">compression_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        
        <span class="n">features_over_time_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">util_plot_button_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Plotting&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">parent</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">plotting_window</span><span class="p">))</span>
        <span class="n">features_over_time_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="n">util_plot_button_frame</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<div class="viewcode-block" id="main_window.get_installed_version">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.main_window.get_installed_version">[docs]</a>
    <span class="k">def</span> <span class="nf">get_installed_version</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">version</span><span class="p">(</span><span class="s2">&quot;CureQ&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">importlib</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">PackageNotFoundError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="main_window.get_latest_version">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.main_window.get_latest_version">[docs]</a>
    <span class="k">def</span> <span class="nf">get_latest_version</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://pypi.org/pypi/CureQ/json&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;info&quot;</span><span class="p">][</span><span class="s2">&quot;version&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="main_window.update_package">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.main_window.update_package">[docs]</a>
    <span class="k">def</span> <span class="nf">update_package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">latest_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_latest_version</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_installed_version</span><span class="p">()</span> <span class="o">!=</span> <span class="n">latest_version</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">([</span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span> <span class="s2">&quot;-m&quot;</span><span class="p">,</span> <span class="s2">&quot;pip&quot;</span><span class="p">,</span> <span class="s2">&quot;install&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;CureQ==</span><span class="si">{</span><span class="n">latest_version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">])</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully installed CureQ version </span><span class="si">{</span><span class="n">latest_version</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
                <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Successfully installed CureQ version </span><span class="si">{</span><span class="n">latest_version</span><span class="si">}</span><span class="s2">. Please restart the application for the changes to take effect.&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;check&quot;</span><span class="p">,</span> <span class="n">option_1</span><span class="o">=</span><span class="s2">&quot;Ok&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Updated Package&quot;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to install CureQ version </span><span class="si">{</span><span class="n">latest_version</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
                <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Failed to install CureQ version </span><span class="si">{</span><span class="n">latest_version</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;cancel&quot;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span></div>


<div class="viewcode-block" id="main_window.colorpicker">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.main_window.colorpicker">[docs]</a>
    <span class="k">def</span> <span class="nf">colorpicker</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">popup</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkToplevel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Theme Selector&#39;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">popup</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">popup</span><span class="o">.</span><span class="n">iconbitmap</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">icon_path</span><span class="p">)))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        
        <span class="k">def</span> <span class="nf">set_theme</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">set_theme</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_color</span><span class="p">)</span>
            <span class="n">popup</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">main_window</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">set_color</span><span class="p">(</span><span class="n">color</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selected_color</span><span class="o">=</span><span class="n">color</span>

        <span class="n">popup</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">colorpicker</span> <span class="o">=</span> <span class="n">CTkColorPicker</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">350</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">set_color</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">initial_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_color</span><span class="p">)</span>
        <span class="n">colorpicker</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">confirm_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">popup</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Confirm&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">set_theme</span><span class="p">)</span>
        <span class="n">confirm_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></div>
</div>

    

<div class="viewcode-block" id="parameter_frame">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.parameter_frame">[docs]</a>
<span class="k">class</span> <span class="nc">parameter_frame</span><span class="p">(</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Allows the user to set the different parameters for the analysis.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">tooltipwraplength</span>

        <span class="c1"># Weights</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;Filter parameters&quot;&quot;&quot;</span>
        <span class="c1"># Filter parameters frame</span>
        <span class="n">filterparameters</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">filterparameters</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">filterparameters</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">filterparameters_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">filterparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Filter Parameters&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">25</span><span class="p">))</span>
        <span class="n">filterparameters_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># Low cutoff</span>
        <span class="n">lowcutofflabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">filterparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Low cutoff:&quot;</span><span class="p">)</span>
        <span class="n">lowcutofflabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">lowcutofftooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">lowcutofflabel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Define the low cutoff value for the butterworth bandpass filter. Values should be given in hertz&#39;</span><span class="p">)</span>
        <span class="n">lowcutoffinput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">filterparameters</span><span class="p">)</span>
        <span class="n">lowcutoffinput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>

        <span class="c1"># High cutoff</span>
        <span class="n">highcutofflabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">filterparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;High cutoff:&quot;</span><span class="p">)</span>
        <span class="n">highcutofflabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">highcutofftooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">highcutofflabel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Define the high cutoff value for the butterworth bandpass filter. Values should be given in hertz&#39;</span><span class="p">)</span>
        <span class="n">highcutoffinput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">filterparameters</span><span class="p">)</span>
        <span class="n">highcutoffinput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>

        <span class="c1"># Filter order</span>
        <span class="n">orderlabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">filterparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Filter order:&quot;</span><span class="p">)</span>
        <span class="n">orderlabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">ordertooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">orderlabel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;The filter order for the butterworth filter&#39;</span><span class="p">)</span>
        <span class="n">orderinput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">filterparameters</span><span class="p">)</span>
        <span class="n">orderinput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;Spike detection parameters&quot;&quot;&quot;</span>
        <span class="c1"># Set up all the spike detection parameters</span>
        <span class="n">spikedetectionparameters</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">spikedetectionparameters</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nsew&#39;</span><span class="p">,</span> <span class="n">rowspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="n">spikedetectionparameters</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">spikedetectionparameters</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">spikedetectionparameters</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">filterparameters_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">spikedetectionparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Spike Detection Parameters&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">25</span><span class="p">))</span>
        <span class="n">filterparameters_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># Threshold parameters</span>
        <span class="n">thresholdparameters</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">spikedetectionparameters</span><span class="p">)</span>
        <span class="n">thresholdparameters</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nsew&#39;</span><span class="p">)</span>

        <span class="n">thresholdparameters</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">thresholdparameters_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">thresholdparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Threshold Parameters&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">15</span><span class="p">))</span>
        <span class="n">thresholdparameters_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># Threshold portion</span>
        <span class="n">thresholdportionlabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">thresholdparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Threshold portion:&quot;</span><span class="p">)</span>
        <span class="n">thresholdportionlabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">thresholdportiontooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">thresholdportionlabel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Define the portion of the electrode data that is used for determining the threshold. A higher values will give a better estimate of the background noise, but will take longer to compute Ranges from 0 to 1.&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">thresholdportioninput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">thresholdparameters</span><span class="p">)</span>
        <span class="n">thresholdportioninput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># stdevmultiplier</span>
        <span class="n">stdevmultiplierlabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">thresholdparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Standard Deviation Multiplier:&quot;</span><span class="p">)</span>
        <span class="n">stdevmultiplierlabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">stdevmultipliertooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">stdevmultiplierlabel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Define when beyond which point values are seen as outliers (spikes) when identifying spike-free noise. A higher value will identify more data as noise&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">stdevmultiplierinput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">thresholdparameters</span><span class="p">)</span>
        <span class="n">stdevmultiplierinput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># RMSmultiplier</span>
        <span class="n">RMSmultiplierlabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">thresholdparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;RMS Multiplier:&quot;</span><span class="p">)</span>
        <span class="n">RMSmultiplierlabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">RMSmultipliertooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">RMSmultiplierlabel</span><span class="p">,</span> <span class="s1">&#39;Define the multiplication factor of the root mean square (RMS) of the background noise. A higher number will lead to a higher threshold&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">RMSmultiplierinput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">thresholdparameters</span><span class="p">)</span>
        <span class="n">RMSmultiplierinput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># Spike validation parameters</span>
        <span class="n">validationparameters</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">spikedetectionparameters</span><span class="p">)</span>
        <span class="n">validationparameters</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nsew&#39;</span><span class="p">)</span>

        <span class="n">validationparameters</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">validationparameters_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">validationparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Spike Validation Parameters&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">15</span><span class="p">))</span>
        <span class="n">validationparameters_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># Refractory period</span>
        <span class="n">refractoryperiodlabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">validationparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Refractory Period:&quot;</span><span class="p">)</span>
        <span class="n">refractoryperiodlabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">refractoryperiodtooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">refractoryperiodlabel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Define the refractory period in the spike detection In this period after a spike, no other spike can be detected. Value should be given in seconds, so 1 ms = 0.001 s&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">refractoryperiodinput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">validationparameters</span><span class="p">)</span>
        <span class="n">refractoryperiodinput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>

        <span class="c1"># Dropdown menu where the user selects the validation method</span>
        <span class="k">def</span> <span class="nf">option_selected</span><span class="p">(</span><span class="n">choice</span><span class="p">):</span>
            <span class="n">validation_method</span> <span class="o">=</span> <span class="n">choice</span>
            <span class="k">if</span> <span class="n">validation_method</span><span class="o">==</span><span class="s1">&#39;Noisebased&#39;</span><span class="p">:</span>
                <span class="n">exittimeinput</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">)</span>
                <span class="n">maxheightinput</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">)</span>
                <span class="n">amplitudedropinput</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">exittimeinput</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;disabled&quot;</span><span class="p">)</span>
                <span class="n">maxheightinput</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;disabled&quot;</span><span class="p">)</span>
                <span class="n">amplitudedropinput</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;disabled&quot;</span><span class="p">)</span>
            
        
        <span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Noisebased&#39;</span><span class="p">,</span> <span class="s1">&#39;none&#39;</span><span class="p">]</span>    
        <span class="n">dropdown_var</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">options</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">dropdownlabel</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">validationparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Spike validation method:&quot;</span><span class="p">)</span>
        <span class="n">dropdownlabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">dropdowntooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">dropdownlabel</span><span class="p">,</span> <span class="s1">&#39;Select the spike validation method. </span><span class="se">\&#39;</span><span class="s1">Noisebased</span><span class="se">\&#39;</span><span class="s1"> will perform spike validation using surrounding noise, </span><span class="se">\&#39;</span><span class="s1">none</span><span class="se">\&#39;</span><span class="s1"> will not perform any spike validation.&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">dropdown_menu</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkComboBox</span><span class="p">(</span><span class="n">validationparameters</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="n">dropdown_var</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">options</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">option_selected</span><span class="p">)</span>
        <span class="n">dropdown_menu</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nes&#39;</span><span class="p">)</span>

        <span class="n">exittimelabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">validationparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Exit time:&quot;</span><span class="p">)</span>
        <span class="n">exittimelabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">exittimetooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">exittimelabel</span><span class="p">,</span> <span class="s1">&#39;Define the time in which the signal must drop/rise a certain amplitude before/after a spike has been detected to be validated. Value should be given in seconds, so 1 ms is 0.001s&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">exittimeinput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">validationparameters</span><span class="p">)</span>
        <span class="n">exittimeinput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>

        <span class="n">amplitudedroplabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">validationparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Drop amplitude:&quot;</span><span class="p">)</span>
        <span class="n">amplitudedroplabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">amplitudedroptooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">amplitudedroplabel</span><span class="p">,</span> <span class="s1">&#39;Multiplied with the root mean square of the surrounding noise. This is the height the signal must drop/rise in amplitude to be validated.&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">amplitudedropinput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">validationparameters</span><span class="p">)</span>
        <span class="n">amplitudedropinput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>

        <span class="n">maxheightlabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">validationparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Max drop:&quot;</span><span class="p">)</span>
        <span class="n">maxheightlabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">maxheighttooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">maxheightlabel</span><span class="p">,</span> <span class="s1">&#39;Multiplied with the threshold value of the electrode. The maximum height a spike can be required to drop in amplitude in the set timeframe&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">maxheightinput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">validationparameters</span><span class="p">)</span>
        <span class="n">maxheightinput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;Burst detection parameters&quot;&quot;&quot;</span>
        <span class="c1"># Set up all the burst detection parameters</span>
        <span class="n">burstdetectionparameters</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">burstdetectionparameters</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">burstdetectionparameters_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">burstdetectionparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Burst Detection Parameters&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">25</span><span class="p">))</span>
        <span class="n">burstdetectionparameters_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">burstdetectionparameters</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Setup up the minimal amount of spikes for a burst</span>
        <span class="n">minspikeslabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstdetectionparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Minimal amount of spikes:&quot;</span><span class="p">)</span>
        <span class="n">minspikeslabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">minspikestooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">minspikeslabel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Define the minimal amount of spikes a burst should have before being considered as one.&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">minspikesinput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstdetectionparameters</span><span class="p">)</span>
        <span class="n">minspikesinput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># Setup up the default threshold</span>
        <span class="n">defaultthlabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstdetectionparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Default interval threshold:&quot;</span><span class="p">)</span>
        <span class="n">defaultthlabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">defaultthtooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">defaultthlabel</span><span class="p">,</span> <span class="s1">&#39;Define the default inter-spike interval threshold that is used for burst detection. Value should be given in miliseconds.&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">defaultthinput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstdetectionparameters</span><span class="p">)</span>
        <span class="n">defaultthinput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># Setup up the max threshold</span>
        <span class="n">maxisilabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstdetectionparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Max interval threshold:&quot;</span><span class="p">)</span>
        <span class="n">maxisilabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">maxisitooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">maxisilabel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Define the maximum value the inter-spike interval threshold can be when 2 valid peaks have been detected in the ISI graph. Value should be given in miliseconds.&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">maxisiinput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstdetectionparameters</span><span class="p">)</span>
        <span class="n">maxisiinput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># Setup the KDE bandwidth</span>
        <span class="n">isikdebwlabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstdetectionparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;KDE bandwidth:&quot;</span><span class="p">)</span>
        <span class="n">isikdebwlabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">isikdebwtooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">isikdebwlabel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Define the bandwidth that is used when calculating the kernel density estimate of the inter-spike intervals.&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">isikdebwinput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstdetectionparameters</span><span class="p">)</span>
        <span class="n">isikdebwinput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;Network burst detection parameters&quot;&quot;&quot;</span>
        <span class="n">networkburstdetectionparameters</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">networkburstdetectionparameters</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
        <span class="n">networkburstdetectionparameters_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">networkburstdetectionparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Network Burst Detection Parameters&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">25</span><span class="p">))</span>
        <span class="n">networkburstdetectionparameters_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">networkburstdetectionparameters</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Setup the minimum amount of channels participating</span>
        <span class="n">minchannelslabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">networkburstdetectionparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Min channels:&quot;</span><span class="p">)</span>
        <span class="n">minchannelslabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">minchannelstooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">minchannelslabel</span><span class="p">,</span> <span class="s1">&#39;Define the minimal percentage of channels that should be active in a network burst, values ranges from 0 to 1. For example, a value of 0.5 requires half of the channels to be actively bursting during a network burst.&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">minchannelsinput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">networkburstdetectionparameters</span><span class="p">)</span>
        <span class="n">minchannelsinput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># Setup the thresholding method</span>
        <span class="n">nwthoptions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Yen&#39;</span><span class="p">,</span> <span class="s1">&#39;Otsu&#39;</span><span class="p">,</span> <span class="s1">&#39;Li&#39;</span><span class="p">,</span> <span class="s1">&#39;Isodata&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean&#39;</span><span class="p">,</span> <span class="s1">&#39;Minimum&#39;</span><span class="p">,</span> <span class="s1">&#39;Triangle&#39;</span><span class="p">]</span>
        <span class="n">networkth_var</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">nwthoptions</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">nbd_dropdownlabel</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">networkburstdetectionparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Thresholding method:&quot;</span><span class="p">)</span>
        <span class="n">nbd_dropdownlabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">nbd_dropdownlabel</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">nbd_dropdownlabel</span><span class="p">,</span> <span class="s1">&#39;The application offers multiple methods to automatically calculate the network burst detection activity threshold. Methods are derived from the scikit-image filters library.&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">dropdown_menu</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkComboBox</span><span class="p">(</span><span class="n">networkburstdetectionparameters</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="n">networkth_var</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">nwthoptions</span><span class="p">)</span>
        <span class="n">dropdown_menu</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># Setup the network burst detection KDE bandwidth</span>
        <span class="n">nbd_kde_bandwidth_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">networkburstdetectionparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;KDE Bandwidth:&quot;</span><span class="p">)</span>
        <span class="n">nbd_kde_bandwidth_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">nbd_kde_bandwidth_tooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">nbd_kde_bandwidth_label</span><span class="p">,</span> <span class="s1">&#39;Define the bandwidth value that should be used when creating the kernel density estimate for the network burst detection.&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">nbd_kde_bandwidth_input</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">networkburstdetectionparameters</span><span class="p">)</span>
        <span class="n">nbd_kde_bandwidth_input</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;Other parameters&quot;&quot;&quot;</span>
        <span class="n">otherparameters</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">otherparameters</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nsew&#39;</span><span class="p">)</span>
        <span class="n">otherparameters_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">otherparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Other Parameters&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">25</span><span class="p">))</span>
        <span class="n">otherparameters_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">removeinactivefunc</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">removeinactivevar</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
                <span class="n">activitythinput</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">activitythinput</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>

        <span class="c1"># Use multiprocessing</span>
        <span class="n">multiprocessinglabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">otherparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Use multiprocessing:&quot;</span><span class="p">)</span>
        <span class="n">multiprocessinglabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">multiprocessingtooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">multiprocessinglabel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Using multiprocessing means the electrodes will be analyzed in parallel, generally speeding up the analysis. Multiprocessing might not work properly if the device you</span><span class="se">\&#39;</span><span class="s1">re using does not have sufficient RAM/CPU-cores&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">multiprocessingvar</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">BooleanVar</span><span class="p">()</span>
        <span class="n">multiprocessinginput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkCheckBox</span><span class="p">(</span><span class="n">otherparameters</span><span class="p">,</span> <span class="n">onvalue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">offvalue</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="n">multiprocessingvar</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">multiprocessinginput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># Remove inactive electrodes</span>
        <span class="n">removeinactivelabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">otherparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Remove inactive electrodes:&quot;</span><span class="p">)</span>
        <span class="n">removeinactivelabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">removeinactivetooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">removeinactivelabel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Remove inactive electrodes from the spike, burst and network burst feature calculations.&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">removeinactivevar</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">IntVar</span><span class="p">()</span>
        <span class="n">removeinactiveinput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkCheckBox</span><span class="p">(</span><span class="n">otherparameters</span><span class="p">,</span> <span class="n">onvalue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">offvalue</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="n">removeinactivevar</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">removeinactivefunc</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">removeinactiveinput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># Setup the activity threshold</span>
        <span class="n">activitythlabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">otherparameters</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Activity threshold:&quot;</span><span class="p">)</span>
        <span class="n">activitythlabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">activitythtooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">activitythlabel</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Define the minimal activity a channel must have, to be used in calculating features. Value should be given in hertz, so a value of 0.1 would mean any channel with less that 1 spike per 10 seconds will be removed&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="n">activitythinput</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">otherparameters</span><span class="p">)</span>
        <span class="n">activitythinput</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;Buttons and functions for saving, resetting and importing parameters&quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">set_parameters</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>

            <span class="c1"># Make sure every entry is set to &#39;normal&#39;</span>
            <span class="n">dropdown_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;Noisebased&quot;</span><span class="p">)</span>
            <span class="n">removeinactivevar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">removeinactivefunc</span><span class="p">()</span>
            <span class="n">option_selected</span><span class="p">(</span><span class="n">dropdown_var</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>

            <span class="n">lowcutoffinput</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
            <span class="n">lowcutoffinput</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;low cutoff&quot;</span><span class="p">])</span>
            <span class="n">highcutoffinput</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
            <span class="n">highcutoffinput</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;high cutoff&quot;</span><span class="p">])</span>
            <span class="n">orderinput</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
            <span class="n">orderinput</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;order&quot;</span><span class="p">])</span>
            <span class="n">thresholdportioninput</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
            <span class="n">thresholdportioninput</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;threshold portion&quot;</span><span class="p">])</span>
            <span class="n">stdevmultiplierinput</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
            <span class="n">stdevmultiplierinput</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;standard deviation multiplier&quot;</span><span class="p">])</span>
            <span class="n">RMSmultiplierinput</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
            <span class="n">RMSmultiplierinput</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;rms multiplier&quot;</span><span class="p">])</span>
            <span class="n">refractoryperiodinput</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
            <span class="n">refractoryperiodinput</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;refractory period&quot;</span><span class="p">])</span>
            <span class="n">dropdown_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;spike validation method&quot;</span><span class="p">])</span>
            <span class="n">exittimeinput</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
            <span class="n">exittimeinput</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;exit time&quot;</span><span class="p">])</span>
            <span class="n">amplitudedropinput</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
            <span class="n">amplitudedropinput</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;drop amplitude&quot;</span><span class="p">])</span>
            <span class="n">maxheightinput</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
            <span class="n">maxheightinput</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;max drop&quot;</span><span class="p">])</span>
            <span class="n">minspikesinput</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
            <span class="n">minspikesinput</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;minimal amount of spikes&quot;</span><span class="p">])</span>
            <span class="n">defaultthinput</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
            <span class="n">defaultthinput</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;default interval threshold&quot;</span><span class="p">])</span>
            <span class="n">maxisiinput</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
            <span class="n">maxisiinput</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;max interval threshold&quot;</span><span class="p">])</span>
            <span class="n">isikdebwinput</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
            <span class="n">isikdebwinput</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;burst detection kde bandwidth&quot;</span><span class="p">])</span>
            <span class="n">minchannelsinput</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
            <span class="n">minchannelsinput</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;min channels&quot;</span><span class="p">])</span>
            <span class="n">networkth_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;thresholding method&quot;</span><span class="p">])</span>
            <span class="n">removeinactivevar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="nb">bool</span><span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;remove inactive electrodes&quot;</span><span class="p">]))</span>
            <span class="n">activitythinput</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
            <span class="n">activitythinput</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;activity threshold&quot;</span><span class="p">])</span>
            <span class="n">multiprocessingvar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="nb">bool</span><span class="p">(</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;use multiprocessing&quot;</span><span class="p">]))</span>
            <span class="n">nbd_kde_bandwidth_input</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
            <span class="n">nbd_kde_bandwidth_input</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;nbd kde bandwidth&quot;</span><span class="p">])</span>

            <span class="c1"># Update other parameter availability</span>
            <span class="n">removeinactivefunc</span><span class="p">()</span>
            <span class="n">option_selected</span><span class="p">(</span><span class="n">dropdown_var</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>

        <span class="k">def</span> <span class="nf">import_parameters</span><span class="p">():</span>
            <span class="n">parametersfile</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">askopenfilename</span><span class="p">(</span><span class="n">filetypes</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;Parameter file&quot;</span><span class="p">,</span> <span class="s2">&quot;*.json&quot;</span><span class="p">)])</span>
            <span class="k">if</span> <span class="n">parametersfile</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">parameters</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">parametersfile</span><span class="p">))</span>
            
            <span class="n">set_parameters</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">save_parameters</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;low cutoff&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">lowcutoffinput</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;high cutoff&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">highcutoffinput</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;order&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">orderinput</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;refractory period&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">refractoryperiodinput</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;exit time&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">exittimeinput</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;burst detection kde bandwidth&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">isikdebwinput</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;minimal amount of spikes&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">minspikesinput</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;max interval threshold&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">maxisiinput</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;default interval threshold&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">defaultthinput</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;max drop&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">maxheightinput</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;drop amplitude&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">amplitudedropinput</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;standard deviation multiplier&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">stdevmultiplierinput</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;rms multiplier&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">RMSmultiplierinput</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;min channels&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">minchannelsinput</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;thresholding method&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">networkth_var</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;nbd kde bandwidth&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">nbd_kde_bandwidth_input</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;remove inactive electrodes&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="n">removeinactivevar</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;activity threshold&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">activitythinput</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;threshold portion&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">thresholdportioninput</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;spike validation method&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">dropdown_var</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;use multiprocessing&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="n">multiprocessingvar</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">main_window</span><span class="p">)</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
                <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span>
                              <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Certain parameters could not be converted to the correct datatype (e.g. int or float). Please check if every parameter has the correct values&#39;</span><span class="p">,</span>
                              <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;cancel&quot;</span><span class="p">,</span>
                              <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
        
        <span class="n">set_parameters</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">set_default_parameters</span><span class="p">():</span>
            <span class="n">set_parameters</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">default_parameters</span><span class="p">)</span>

        <span class="n">default_parameters</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Restore default parameters&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">set_default_parameters</span><span class="p">)</span>
        <span class="n">default_parameters</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nsew&#39;</span><span class="p">)</span>

        <span class="n">import_parameters_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Import parameters&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">import_parameters</span><span class="p">)</span>
        <span class="n">import_parameters_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nsew&#39;</span><span class="p">)</span>

        <span class="n">save_parameters_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Save parameters and return&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">save_parameters</span><span class="p">)</span>
        <span class="n">save_parameters_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nsew&#39;</span><span class="p">)</span></div>



<div class="viewcode-block" id="select_folder_frame">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.select_folder_frame">[docs]</a>
<span class="k">class</span> <span class="nc">select_folder_frame</span><span class="p">(</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Allows the user to select a dataset and outputfile to inspect the results.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">folder_path</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_path</span><span class="o">=</span><span class="s1">&#39;&#39;</span>

        <span class="n">datalocation</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">datalocation</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nsew&#39;</span><span class="p">)</span>
        <span class="n">datalocation</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">folderlabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">datalocation</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Folder:&quot;</span><span class="p">)</span>
        <span class="n">folderlabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_selectfolder</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">datalocation</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Select a folder&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">openfolder</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_selectfolder</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">rawfilelabel</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">datalocation</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;File:&quot;</span><span class="p">)</span>
        <span class="n">rawfilelabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_selectrawfile</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">datalocation</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Select a file&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">openrawfile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btn_selectrawfile</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">view_results_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;View results&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">go_to_results</span><span class="p">(</span><span class="n">parent</span><span class="p">))</span>
        <span class="n">view_results_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">return_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Return&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">parent</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">main_window</span><span class="p">))</span>
        <span class="n">return_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="select_folder_frame.openfolder">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.select_folder_frame.openfolder">[docs]</a>
    <span class="k">def</span> <span class="nf">openfolder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">resultsfolder</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">askdirectory</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">resultsfolder</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">btn_selectfolder</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">resultsfolder</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">folder_path</span><span class="o">=</span><span class="n">resultsfolder</span></div>

    
<div class="viewcode-block" id="select_folder_frame.openrawfile">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.select_folder_frame.openrawfile">[docs]</a>
    <span class="k">def</span> <span class="nf">openrawfile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">selectedfile</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">askopenfilename</span><span class="p">(</span><span class="n">filetypes</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;MEA data&quot;</span><span class="p">,</span> <span class="s2">&quot;*.h5&quot;</span><span class="p">)])</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">selectedfile</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">btn_selectrawfile</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">selectedfile</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data_path</span><span class="o">=</span><span class="n">selectedfile</span></div>


    <span class="c1"># Check if the correct folder/file has been selected</span>
<div class="viewcode-block" id="select_folder_frame.go_to_results">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.select_folder_frame.go_to_results">[docs]</a>
    <span class="k">def</span> <span class="nf">go_to_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">folder_path</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_path</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Please select an output folder and raw datafile&#39;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;cancel&quot;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
            <span class="k">return</span>
        
        <span class="c1"># Check for parameters json</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">parameters</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">folder_path</span><span class="si">}</span><span class="s2">/parameters.json&quot;</span><span class="p">)</span>
            <span class="n">parameters</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Could not load in the results, please make sure you have selected the correct folder&#39;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;cancel&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
            <span class="k">return</span>
        
        <span class="c1"># Check the raw datafile</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">hdf_file</span><span class="p">:</span>
                <span class="n">datashape</span><span class="o">=</span><span class="n">hdf_file</span><span class="p">[</span><span class="s2">&quot;Data/Recording_0/AnalogStream/Stream_0/ChannelData&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Could not load in the raw data, please make sure you have selected the correct file&#39;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;cancel&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># If everything is good, go to the next frame</span>
        <span class="n">parent</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">view_results</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">folder_path</span><span class="p">,</span> <span class="n">rawfile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data_path</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="view_results">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.view_results">[docs]</a>
<span class="k">class</span> <span class="nc">view_results</span><span class="p">(</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Allow the user to view the results of the MEA analysis</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">folder</span><span class="p">,</span> <span class="n">rawfile</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">folder</span><span class="o">=</span><span class="n">folder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rawfile</span><span class="o">=</span><span class="n">rawfile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;MEA Analysis Tool - Version: </span><span class="si">{</span><span class="n">version</span><span class="p">(</span><span class="s1">&#39;CureQ&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">folder</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkTabview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Single Electrode View&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Single Electrode View&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Single Electrode View&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Whole Well View&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Whole Well View&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Whole Well View&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># sev = single electrode view</span>
        <span class="c1"># wwv = whole well view</span>

        <span class="c1"># Load files</span>
        <span class="n">parameters</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">folder</span><span class="si">}</span><span class="s2">/parameters.json&quot;</span><span class="p">)</span>
        <span class="n">parameters</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">rawfile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">hdf_file</span><span class="p">:</span>
            <span class="n">datashape</span><span class="o">=</span><span class="n">hdf_file</span><span class="p">[</span><span class="s2">&quot;Data/Recording_0/AnalogStream/Stream_0/ChannelData&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
        <span class="n">well_amnt</span> <span class="o">=</span> <span class="n">datashape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;electrode amount&quot;</span><span class="p">]</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;Single electrode view&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_well</span><span class="o">=</span><span class="mi">1</span>
        <span class="n">sev_well_button_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Single Electrode View&quot;</span><span class="p">))</span>
        <span class="n">sev_well_button_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">sev_electrode_button_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Single Electrode View&quot;</span><span class="p">))</span>
        <span class="n">sev_electrode_button_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
        
        <span class="c1"># Wellbuttons</span>
        <span class="n">ywells</span><span class="p">,</span> <span class="n">xwells</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">calculate_optimal_grid</span><span class="p">(</span><span class="n">well_amnt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sev_wellbuttons</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">i</span><span class="o">=</span><span class="mi">1</span>

        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ywells</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xwells</span><span class="p">):</span>
                <span class="n">well_btn</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">sev_well_button_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set_selected_well</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">25</span><span class="p">))</span>
                <span class="n">well_btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sev_wellbuttons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">well_btn</span><span class="p">)</span>
                <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>

        <span class="c1"># Electrode buttons</span>
        <span class="n">electrode_amnt</span> <span class="o">=</span> <span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;electrode amount&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">electrode_amnt</span><span class="o">==</span><span class="mi">12</span><span class="p">:</span>
            <span class="c1"># Preset for 12 electrode MEA</span>
            <span class="n">electrode_layout</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
                                        <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
                                        <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
                                        <span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">height</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">calculate_optimal_grid</span><span class="p">(</span><span class="n">electrode_amnt</span><span class="p">)</span>
            <span class="n">electrode_layout</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">electrodebuttons</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">electrode_layout</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">electrode_layout</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
                <span class="k">if</span> <span class="n">electrode_layout</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]:</span>
                    <span class="n">electrode_btn</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">sev_electrode_button_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">open_sev_tab</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">25</span><span class="p">))</span>
                    <span class="n">electrode_btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
                    <span class="n">electrodebuttons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">electrode_btn</span><span class="p">)</span>
                    <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;Whole well view&quot;&quot;&quot;</span>
        <span class="n">wwv_well_button_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Whole Well View&quot;</span><span class="p">))</span>
        <span class="n">wwv_well_button_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">wwv_wellbuttons</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">i</span><span class="o">=</span><span class="mi">1</span>

        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ywells</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xwells</span><span class="p">):</span>
                <span class="n">well_btn</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">wwv_well_button_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">open_wwv_tab</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">25</span><span class="p">))</span>
                <span class="n">well_btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
                <span class="n">wwv_wellbuttons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">well_btn</span><span class="p">)</span>
                <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>

        <span class="c1"># Button to return to main menu</span>
        <span class="n">return_to_main</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Return to main menu&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">main_window</span><span class="p">),</span> <span class="n">fg_color</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_1</span><span class="p">)</span>
        <span class="n">return_to_main</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    
<div class="viewcode-block" id="view_results.set_selected_well">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.view_results.set_selected_well">[docs]</a>
    <span class="k">def</span> <span class="nf">set_selected_well</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_well</span><span class="o">=</span><span class="n">i</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sev_wellbuttons</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sev_wellbuttons</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkButton&quot;</span><span class="p">][</span><span class="s2">&quot;fg_color&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sev_wellbuttons</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkButton&quot;</span><span class="p">][</span><span class="s2">&quot;hover_color&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span></div>



<div class="viewcode-block" id="view_results.open_sev_tab">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.view_results.open_sev_tab">[docs]</a>
    <span class="k">def</span> <span class="nf">open_sev_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">electrode</span><span class="p">):</span>
        <span class="n">single_electrode_view</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">folder</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawfile</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_well</span><span class="p">,</span> <span class="n">electrode</span><span class="p">)</span></div>


<div class="viewcode-block" id="view_results.open_wwv_tab">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.view_results.open_wwv_tab">[docs]</a>
    <span class="k">def</span> <span class="nf">open_wwv_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">well</span><span class="p">):</span>
        <span class="n">whole_well_view</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">folder</span><span class="p">,</span> <span class="n">well</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="single_electrode_view">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.single_electrode_view">[docs]</a>
<span class="k">class</span> <span class="nc">single_electrode_view</span><span class="p">(</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkToplevel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Allows the user to inpect the spike and burst detection on a single electrode.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">folder</span><span class="p">,</span> <span class="n">rawfile</span><span class="p">,</span> <span class="n">well</span><span class="p">,</span> <span class="n">electrode</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Well: </span><span class="si">{</span><span class="n">well</span><span class="si">}</span><span class="s2">, Electrode: </span><span class="si">{</span><span class="n">electrode</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkTabview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Spike Detection&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Spike Detection&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Spike Detection&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Burst Detection&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Burst Detection&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Burst Detection&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Set the icon with a little delay, otherwise it does not work</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconbitmap</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent</span><span class="o">.</span><span class="n">icon_path</span><span class="p">)))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">folder</span><span class="si">}</span><span class="s2">/parameters.json&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">electrode_nr</span><span class="o">=</span><span class="p">(</span><span class="n">well</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;electrode amount&quot;</span><span class="p">]</span><span class="o">+</span><span class="n">electrode</span><span class="o">-</span><span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rawfile</span><span class="o">=</span><span class="n">rawfile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">folder</span><span class="o">=</span><span class="n">folder</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Spike detection&quot;&quot;&quot;</span>
        <span class="c1"># Create a frame for the plots</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">electrode_plot_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Spike Detection&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">electrode_plot_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">electrode_plot_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">electrode_plot_frame</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Create a frame for the settings</span>
        <span class="n">electrode_settings_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Spike Detection&quot;</span><span class="p">))</span>
        <span class="n">electrode_settings_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">electrode_settings_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">electrode_settings_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">electrode_settings_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Spike Detection&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Spike Detection&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Bandpass options</span>
        <span class="n">bp_options_ew_frame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">electrode_settings_frame</span><span class="p">)</span>
        <span class="n">bp_options_ew_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">bandpass_options_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">bp_options_ew_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Bandpass Parameters&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">25</span><span class="p">))</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="n">lowcut_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">bp_options_ew_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Low cutoff&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lowcut_ew_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">bp_options_ew_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lowcut_ew_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="n">highcut_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">bp_options_ew_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;High cutoff&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">highcut_ew_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">bp_options_ew_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">highcut_ew_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="n">order_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">bp_options_ew_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Order&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order_ew_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">bp_options_ew_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order_ew_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># Threshold options</span>
        <span class="n">th_options_ew_frame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">electrode_settings_frame</span><span class="p">)</span>
        <span class="n">th_options_ew_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">threshold_options_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">th_options_ew_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Threshold Parameters&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">25</span><span class="p">))</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        
        <span class="n">stdevmultiplier_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">th_options_ew_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Standard deviation multiplier&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stdevmultiplier_ew_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">th_options_ew_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stdevmultiplier_ew_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="n">RMSmultiplier_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">th_options_ew_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;RMS multiplier&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">RMSmultiplier_ew_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">th_options_ew_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">RMSmultiplier_ew_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="n">thpn_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">th_options_ew_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Threshold portion&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thpn_ew_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">th_options_ew_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thpn_ew_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># Spike validation options</span>
        <span class="n">val_options_ew_frame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">electrode_settings_frame</span><span class="p">)</span>
        <span class="n">val_options_ew_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">spike_val_options_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">val_options_ew_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Spike Detection Parameters&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">25</span><span class="p">))</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">ew_option_selected</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_states</span><span class="p">()</span>
                
        <span class="n">validation_options</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Noisebased&#39;</span><span class="p">,</span> <span class="s1">&#39;none&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validation_method_var</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">validation_options</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">validation_method_label</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">val_options_ew_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Spike validation method:&quot;</span><span class="p">)</span>
        <span class="n">validation_method_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validation_method_entry</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkOptionMenu</span><span class="p">(</span><span class="n">val_options_ew_frame</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">validation_method_var</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">validation_options</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">ew_option_selected</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validation_method_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">rfpd_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">val_options_ew_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Refractory period&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rfpd_ew_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">val_options_ew_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rfpd_ew_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="n">exittime_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">val_options_ew_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Exit time&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exittime_ew_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">val_options_ew_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exittime_ew_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="n">dropamplitude_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">val_options_ew_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Drop amplitude&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropamplitude_ew_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">val_options_ew_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropamplitude_ew_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="n">maxdrop_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">val_options_ew_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Max drop&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxdrop_ew_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">val_options_ew_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxdrop_ew_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="n">plot_rectangle_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">val_options_ew_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Plot validation&#39;</span><span class="p">)</span>
        <span class="n">plot_rectangle_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">plot_rectangle_tooltip</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">plot_rectangle_label</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Display the rectangles that have been used to validate the spikes. Warning: Plotting these is computationally expensive and might take a while&#39;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">tooltipwraplength</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_rectangle</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">BooleanVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_rectangle</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_rectangle_ew_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkCheckBox</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">val_options_ew_frame</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_rectangle</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_rectangle_ew_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># Set values and create initial plot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>

        <span class="c1"># Buttons</span>
        <span class="n">update_plot_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">electrode_settings_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Update plot&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_plot</span><span class="p">,</span> <span class="n">parent</span><span class="p">))</span>
        <span class="n">update_plot_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
        <span class="n">electrode_plot_disclaimer</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">update_plot_button</span><span class="p">,</span> <span class="n">y_offset</span><span class="o">=-</span><span class="mi">100</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;These settings are for visualisation purposes only, they will not affect the current analysis outcomes, or further steps such as burst or network burst detection. These options are solely here to show how they could alter the analysis.&#39;</span><span class="p">)</span>

        <span class="n">reset_button</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">electrode_settings_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Reset&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">,</span> <span class="n">parent</span><span class="p">))</span>
        <span class="n">reset_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Burst Detection&quot;&quot;&quot;</span>
        <span class="c1"># Create the initial burst plot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">burstplotsframe</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Burst Detection&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">burstplotsframe</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">burstsettingsframe</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Burst Detection&quot;</span><span class="p">),</span> <span class="n">fg_color</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_6</span><span class="p">)</span>
        <span class="n">burstsettingsframe</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Burst detection settings</span>
        <span class="n">burst_options_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstsettingsframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Burst Detection Parameters&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">25</span><span class="p">))</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">minspikes_bw_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstsettingsframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Minimal amount of spikes&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minspikes_bw_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstsettingsframe</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minspikes_bw_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">def_iv_bw_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstsettingsframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Default interval threshold&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">def_iv_bw_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstsettingsframe</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">def_iv_bw_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">max_iv_bw_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstsettingsframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Max interval threshold&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_iv_bw_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstsettingsframe</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_iv_bw_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">kde_bw_bw_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstsettingsframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;KDE bandwidth&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kde_bw_bw_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstsettingsframe</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kde_bw_bw_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># Burst buttons</span>
        <span class="n">update_burst_plot_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstsettingsframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Update plot&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_burst_plot</span><span class="p">,</span> <span class="n">parent</span><span class="p">))</span>
        <span class="n">update_burst_plot_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">burst_plot_disclaimer</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">update_burst_plot_button</span><span class="p">,</span> <span class="n">y_offset</span><span class="o">=-</span><span class="mi">100</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;These settings are for visualisation purposes only, they will not affect the current analysis outcomes, or further steps such as network burst detection. These options are solely here to show how they could alter the analysis.&#39;</span><span class="p">)</span>

        <span class="n">reset_burst_button</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">burstsettingsframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Reset&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">burst_reset</span><span class="p">,</span> <span class="n">parent</span><span class="p">))</span>
        <span class="n">reset_burst_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># Create first plot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">burst_reset</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>

<div class="viewcode-block" id="single_electrode_view.set_states">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.single_electrode_view.set_states">[docs]</a>
    <span class="k">def</span> <span class="nf">set_states</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">validation_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validation_method_var</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">validation_method</span><span class="o">==</span><span class="s1">&#39;Noisebased&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exittime_ew_entry</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">maxdrop_ew_entry</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dropamplitude_ew_entry</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_rectangle_ew_entry</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exittime_ew_entry</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;disabled&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">maxdrop_ew_entry</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;disabled&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dropamplitude_ew_entry</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;disabled&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_rectangle</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_rectangle_ew_entry</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;disabled&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="single_electrode_view.plot_single_electrode">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.single_electrode_view.plot_single_electrode">[docs]</a>
    <span class="k">def</span> <span class="nf">plot_single_electrode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rawfile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">hdf_file</span><span class="p">:</span>
            <span class="n">dataset</span><span class="o">=</span><span class="n">hdf_file</span><span class="p">[</span><span class="s2">&quot;Data/Recording_0/AnalogStream/Stream_0/ChannelData&quot;</span><span class="p">]</span>
            <span class="n">raw_data</span><span class="o">=</span><span class="n">dataset</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">electrode_nr</span><span class="p">]</span>
        <span class="n">electrode_data</span><span class="o">=</span><span class="n">butter_bandpass_filter</span><span class="p">(</span><span class="n">raw_data</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
        <span class="n">threshold</span><span class="o">=</span><span class="n">fast_threshold</span><span class="p">(</span><span class="n">electrode_data</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">=</span><span class="n">spike_validation</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">electrode_data</span><span class="p">,</span> <span class="n">electrode</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">electrode_nr</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="n">threshold</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span> <span class="n">plot_electrodes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">savedata</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">plot_rectangles</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_rectangle</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        
        <span class="c1"># Check which colorscheme we have to use</span>
        <span class="n">axiscolour</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">text_color</span>
        <span class="n">bgcolor</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_4</span>

        <span class="c1"># Set the plot background</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">bgcolor</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">bgcolor</span><span class="p">)</span>

        <span class="c1"># Change the other colours</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">axiscolour</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">axiscolour</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">side</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">]:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="n">side</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">axiscolour</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">axiscolour</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">axiscolour</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_title</span><span class="p">(),</span><span class="n">color</span><span class="o">=</span><span class="n">axiscolour</span><span class="p">)</span>

        <span class="n">plot_canvas</span> <span class="o">=</span> <span class="n">FigureCanvasTkAgg</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">electrode_plot_frame</span><span class="p">)</span>  
        <span class="n">plot_canvas</span><span class="o">.</span><span class="n">get_tk_widget</span><span class="p">()</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nsew&#39;</span><span class="p">)</span>
        <span class="n">toolbarframe</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">electrode_plot_frame</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">primary_1</span><span class="p">)</span>
        <span class="n">toolbarframe</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
        <span class="n">toolbar</span> <span class="o">=</span> <span class="n">NavigationToolbar2Tk</span><span class="p">(</span><span class="n">plot_canvas</span><span class="p">,</span> <span class="n">toolbarframe</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">primary_1</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">_message_label</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">primary_1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">button</span> <span class="ow">in</span> <span class="n">toolbar</span><span class="o">.</span><span class="n">winfo_children</span><span class="p">():</span>
            <span class="n">button</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">primary_1</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">plot_canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span></div>


<div class="viewcode-block" id="single_electrode_view.update_plot">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.single_electrode_view.update_plot">[docs]</a>
    <span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="c1"># Get the new parameters from the entry widgets</span>
        <span class="c1"># Create a temporary dict we will give to the plot electrode function</span>
        <span class="n">temp_parameters</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
        <span class="n">temp_parameters</span><span class="p">[</span><span class="s1">&#39;low cutoff&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lowcut_ew_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="n">temp_parameters</span><span class="p">[</span><span class="s1">&#39;high cutoff&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">highcut_ew_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="n">temp_parameters</span><span class="p">[</span><span class="s1">&#39;order&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">order_ew_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="n">temp_parameters</span><span class="p">[</span><span class="s1">&#39;standard deviation multiplier&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stdevmultiplier_ew_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="n">temp_parameters</span><span class="p">[</span><span class="s1">&#39;rms multiplier&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RMSmultiplier_ew_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="n">temp_parameters</span><span class="p">[</span><span class="s1">&#39;threshold portion&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">thpn_ew_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="n">temp_parameters</span><span class="p">[</span><span class="s1">&#39;refractory period&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rfpd_ew_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validation_method_var</span><span class="o">.</span><span class="n">get</span><span class="p">())</span><span class="o">==</span><span class="s1">&#39;none&#39;</span><span class="p">:</span>
            <span class="n">temp_parameters</span><span class="p">[</span><span class="s1">&#39;drop amplitude&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">temp_parameters</span><span class="p">[</span><span class="s1">&#39;exit time&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exittime_ew_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
            <span class="n">temp_parameters</span><span class="p">[</span><span class="s1">&#39;drop amplitude&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dropamplitude_ew_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
            <span class="n">temp_parameters</span><span class="p">[</span><span class="s1">&#39;max drop&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxdrop_ew_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        
        <span class="c1"># Update the output folder path, as this might have changed since the original analysis</span>
        <span class="n">temp_parameters</span><span class="p">[</span><span class="s1">&#39;output path&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">folder</span>

        <span class="c1"># Plot the electrode with the new parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_single_electrode</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">temp_parameters</span><span class="p">)</span></div>


<div class="viewcode-block" id="single_electrode_view.default_values">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.single_electrode_view.default_values">[docs]</a>
    <span class="k">def</span> <span class="nf">default_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Bandpass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lowcut_ew_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lowcut_ew_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;low cutoff&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">highcut_ew_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">highcut_ew_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;high cutoff&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order_ew_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order_ew_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;order&quot;</span><span class="p">])</span>
        <span class="c1"># Threshold</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stdevmultiplier_ew_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stdevmultiplier_ew_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;standard deviation multiplier&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">RMSmultiplier_ew_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">RMSmultiplier_ew_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;rms multiplier&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thpn_ew_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thpn_ew_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;threshold portion&quot;</span><span class="p">])</span>
        <span class="c1"># Spike validation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rfpd_ew_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rfpd_ew_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;refractory period&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exittime_ew_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exittime_ew_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;exit time&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropamplitude_ew_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropamplitude_ew_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;drop amplitude&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxdrop_ew_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxdrop_ew_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;max drop&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_rectangle</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validation_method_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;spike validation method&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_states</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="single_electrode_view.reset">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.single_electrode_view.reset">[docs]</a>
    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="c1"># First, enable all the possibly disabled entries so we can alter the values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exittime_ew_entry</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxdrop_ew_entry</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropamplitude_ew_entry</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_rectangle_ew_entry</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">)</span>
        <span class="c1"># Insert the new values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_values</span><span class="p">()</span>
        <span class="c1"># Update the availability of certain entries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_states</span><span class="p">()</span>
        <span class="c1"># Update the plot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_plot</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span></div>


<div class="viewcode-block" id="single_electrode_view.plot_burst_detection">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.single_electrode_view.plot_burst_detection">[docs]</a>
    <span class="k">def</span> <span class="nf">plot_burst_detection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rawfile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">hdf_file</span><span class="p">:</span>
            <span class="n">dataset</span><span class="o">=</span><span class="n">hdf_file</span><span class="p">[</span><span class="s2">&quot;Data/Recording_0/AnalogStream/Stream_0/ChannelData&quot;</span><span class="p">]</span>
            <span class="n">raw_data</span><span class="o">=</span><span class="n">dataset</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">electrode_nr</span><span class="p">]</span>
        <span class="n">electrode_data</span><span class="o">=</span><span class="n">butter_bandpass_filter</span><span class="p">(</span><span class="n">raw_data</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
        <span class="n">KDE_fig</span><span class="p">,</span> <span class="n">burst_fig</span> <span class="o">=</span> <span class="n">burst_detection</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">electrode_data</span><span class="p">,</span> <span class="n">electrode</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">electrode_nr</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span> <span class="n">plot_electrodes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">savedata</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        
        <span class="c1"># Check which colorscheme we have to use</span>
        <span class="n">axiscolour</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">text_color</span>
        <span class="n">bgcolor</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_4</span>

        <span class="k">for</span> <span class="n">fig</span> <span class="ow">in</span> <span class="p">[</span><span class="n">KDE_fig</span><span class="p">,</span> <span class="n">burst_fig</span><span class="p">]:</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">bgcolor</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">bgcolor</span><span class="p">)</span>
            <span class="c1"># Change the other colours</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">axiscolour</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">axiscolour</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">side</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">]:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="n">side</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">axiscolour</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">axiscolour</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">axiscolour</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_title</span><span class="p">(),</span><span class="n">color</span><span class="o">=</span><span class="n">axiscolour</span><span class="p">)</span>
        
        <span class="c1"># Plot the raw burst plot</span>
        <span class="n">burst_canvas</span> <span class="o">=</span> <span class="n">FigureCanvasTkAgg</span><span class="p">(</span><span class="n">burst_fig</span><span class="p">,</span> <span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">burstplotsframe</span><span class="p">)</span>  
        <span class="n">burst_canvas</span><span class="o">.</span><span class="n">get_tk_widget</span><span class="p">()</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nsew&#39;</span><span class="p">)</span>
        <span class="n">toolbarframe</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">burstplotsframe</span><span class="p">)</span>
        <span class="n">toolbarframe</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">toolbar</span> <span class="o">=</span> <span class="n">NavigationToolbar2Tk</span><span class="p">(</span><span class="n">burst_canvas</span><span class="p">,</span> <span class="n">toolbarframe</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">primary_1</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">_message_label</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">primary_1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">button</span> <span class="ow">in</span> <span class="n">toolbar</span><span class="o">.</span><span class="n">winfo_children</span><span class="p">():</span>
            <span class="n">button</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">primary_1</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">burst_canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

        <span class="c1"># Plot the KDE plot</span>
        <span class="n">KDE_canvas</span> <span class="o">=</span> <span class="n">FigureCanvasTkAgg</span><span class="p">(</span><span class="n">KDE_fig</span><span class="p">,</span> <span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">burstplotsframe</span><span class="p">)</span>  
        <span class="n">KDE_canvas</span><span class="o">.</span><span class="n">get_tk_widget</span><span class="p">()</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nsew&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">burstplotsframe</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">burstplotsframe</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">burstplotsframe</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">KDE_canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span></div>


<div class="viewcode-block" id="single_electrode_view.update_burst_plot">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.single_electrode_view.update_burst_plot">[docs]</a>
    <span class="k">def</span> <span class="nf">update_burst_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="c1"># Get the new parameters from the entry widgets</span>
        <span class="n">temp_parameters</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
        <span class="n">temp_parameters</span><span class="p">[</span><span class="s2">&quot;minimal amount of spikes&quot;</span><span class="p">]</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">minspikes_bw_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="n">temp_parameters</span><span class="p">[</span><span class="s2">&quot;default interval threshold&quot;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">def_iv_bw_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="n">temp_parameters</span><span class="p">[</span><span class="s2">&quot;max interval threshold&quot;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_iv_bw_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="n">temp_parameters</span><span class="p">[</span><span class="s2">&quot;burst detection kde bandwidth&quot;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kde_bw_bw_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>

        <span class="c1"># Update the output folder path, as this might have changed since the original analysis</span>
        <span class="n">temp_parameters</span><span class="p">[</span><span class="s1">&#39;output path&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">folder</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">plot_burst_detection</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">temp_parameters</span><span class="p">)</span></div>


<div class="viewcode-block" id="single_electrode_view.default_values_burst">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.single_electrode_view.default_values_burst">[docs]</a>
    <span class="k">def</span> <span class="nf">default_values_burst</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Reset the values to the ones in the JSON file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minspikes_bw_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minspikes_bw_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;minimal amount of spikes&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">def_iv_bw_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">def_iv_bw_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;default interval threshold&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_iv_bw_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_iv_bw_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;max interval threshold&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kde_bw_bw_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kde_bw_bw_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;burst detection kde bandwidth&quot;</span><span class="p">])</span></div>


<div class="viewcode-block" id="single_electrode_view.burst_reset">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.single_electrode_view.burst_reset">[docs]</a>
    <span class="k">def</span> <span class="nf">burst_reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_values_burst</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_burst_plot</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="whole_well_view">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.whole_well_view">[docs]</a>
<span class="k">class</span> <span class="nc">whole_well_view</span><span class="p">(</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkToplevel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Allows the user to inspect the network burst detection of a single well.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">folder</span><span class="p">,</span> <span class="n">well</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Well: </span><span class="si">{</span><span class="n">well</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkTabview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Network Burst Detection&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Network Burst Detection&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Network Burst Detection&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Well Activity&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Well Activity&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Well Activity&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Set the icon with a little delay, otherwise it does not work</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">iconbitmap</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent</span><span class="o">.</span><span class="n">icon_path</span><span class="p">)))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">folder</span><span class="si">}</span><span class="s2">/parameters.json&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">folder</span><span class="o">=</span><span class="n">folder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">well</span><span class="o">=</span><span class="n">well</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;Network burst detection plot&quot;&quot;&quot;</span>
        <span class="c1"># Create a frame for the plots</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nbd_plot_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Network Burst Detection&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nbd_plot_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nbd_plot_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nbd_plot_frame</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Create a frame for the settings</span>
        <span class="n">nbd_settings_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Network Burst Detection&quot;</span><span class="p">),</span> <span class="n">fg_color</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_6</span><span class="p">)</span>
        <span class="n">nbd_settings_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Network burst detection settings</span>
        <span class="c1"># NB settings</span>
        <span class="n">burst_options_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">nbd_settings_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Network Burst Detection Parameters&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">25</span><span class="p">))</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">min_channels_nb_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">nbd_settings_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Min channels (%)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_channels_nb_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">nbd_settings_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_channels_nb_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">th_method_nb_var</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">nbd_settings_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nwthoptions_nb</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Yen&#39;</span><span class="p">,</span> <span class="s1">&#39;Otsu&#39;</span><span class="p">,</span> <span class="s1">&#39;Li&#39;</span><span class="p">,</span> <span class="s1">&#39;Isodata&#39;</span><span class="p">,</span> <span class="s1">&#39;Mean&#39;</span><span class="p">,</span> <span class="s1">&#39;Minimum&#39;</span><span class="p">,</span> <span class="s1">&#39;Triangle&#39;</span><span class="p">]</span>
        <span class="n">th_method_nb</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">nbd_settings_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Thresholding method:&quot;</span><span class="p">)</span>
        <span class="n">th_method_nb</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">th_method_dropdown_nb</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkOptionMenu</span><span class="p">(</span><span class="n">nbd_settings_frame</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">th_method_nb_var</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nwthoptions_nb</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">th_method_dropdown_nb</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="n">nbd_kde_bandwidth_nb_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">nbd_settings_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;KDE Bandwidth:&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nbd_kde_bandwidth_nb_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">nbd_settings_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nbd_kde_bandwidth_nb_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Buttons</span>
        <span class="n">nb_update_plot_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">nbd_settings_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Update plot&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">update_plot</span><span class="p">)</span>
        <span class="n">nb_update_plot_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">nb_plot_disclaimer</span> <span class="o">=</span> <span class="n">CTkToolTip</span><span class="p">(</span><span class="n">nb_update_plot_button</span><span class="p">,</span> <span class="n">y_offset</span><span class="o">=-</span><span class="mi">100</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;These settings are for visualisation purposes only, they will not affect the current analysis outcomes, or further steps such as feature calculation. These options are solely here to show how they could alter the analysis.&#39;</span><span class="p">)</span>

        <span class="n">nb_reset_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">nbd_settings_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Reset&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">)</span>
        <span class="n">nb_reset_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Create initial plot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

<span class="w">        </span><span class="sd">&#39;&#39;&#39;Electrode activity&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">electrode_activity_plot_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Well Activity&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">electrode_activity_plot_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nsew&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">electrode_activity_plot_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">electrode_activity_plot_frame</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">electrode_activity_settings</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Well Activity&quot;</span><span class="p">),</span> <span class="n">fg_color</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_6</span><span class="p">)</span>
        <span class="n">electrode_activity_settings</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">def_bw_value</span><span class="o">=</span><span class="mf">0.1</span>

        <span class="n">el_act_bw_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">electrode_activity_settings</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;KDE bandwidth&quot;</span><span class="p">)</span>
        <span class="n">el_act_bw_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">el_act_bw_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">electrode_activity_settings</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">el_act_bw_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">el_act_bw_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">def_bw_value</span><span class="p">)</span>

        <span class="c1"># Buttons</span>
        <span class="n">el_act_update_plot</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">electrode_activity_settings</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Update plot&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">well_activity_update_plot</span><span class="p">)</span>
        <span class="n">el_act_update_plot</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="n">el_act_reset</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">electrode_activity_settings</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Reset&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_electrode_activity</span><span class="p">)</span>
        <span class="n">el_act_reset</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Create initial plot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset_electrode_activity</span><span class="p">()</span>

<div class="viewcode-block" id="whole_well_view.plot_network_bursts">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.whole_well_view.plot_network_bursts">[docs]</a>
    <span class="k">def</span> <span class="nf">plot_network_bursts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="n">fig</span><span class="o">=</span><span class="n">network_burst_detection</span><span class="p">(</span><span class="n">wells</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">well</span><span class="p">],</span> <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span> <span class="n">plot_electrodes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">savedata</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save_figures</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        
        <span class="c1"># Check which colorscheme we have to use</span>
        <span class="n">axiscolour</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">text_color</span>
        <span class="n">bgcolor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_4</span>

        <span class="n">fig</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">bgcolor</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">bgcolor</span><span class="p">)</span>
            <span class="c1"># Change the other colours</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">axiscolour</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">axiscolour</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">side</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">]:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="n">side</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">axiscolour</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">axiscolour</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">axiscolour</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_title</span><span class="p">(),</span><span class="n">color</span><span class="o">=</span><span class="n">axiscolour</span><span class="p">)</span>

        <span class="n">plot_canvas</span> <span class="o">=</span> <span class="n">FigureCanvasTkAgg</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nbd_plot_frame</span><span class="p">)</span>  
        <span class="n">plot_canvas</span><span class="o">.</span><span class="n">get_tk_widget</span><span class="p">()</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nsew&#39;</span><span class="p">)</span>
        <span class="n">toolbarframe</span><span class="o">=</span><span class="n">ttk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nbd_plot_frame</span><span class="p">)</span>
        <span class="n">toolbarframe</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
        <span class="n">toolbar</span> <span class="o">=</span> <span class="n">NavigationToolbar2Tk</span><span class="p">(</span><span class="n">plot_canvas</span><span class="p">,</span> <span class="n">toolbarframe</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">primary_1</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">_message_label</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">primary_1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">button</span> <span class="ow">in</span> <span class="n">toolbar</span><span class="o">.</span><span class="n">winfo_children</span><span class="p">():</span>
            <span class="n">button</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">primary_1</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">plot_canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span></div>


<div class="viewcode-block" id="whole_well_view.default_values">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.whole_well_view.default_values">[docs]</a>
    <span class="k">def</span> <span class="nf">default_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">th_method_nb_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;thresholding method&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_channels_nb_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_channels_nb_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;min channels&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nbd_kde_bandwidth_nb_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nbd_kde_bandwidth_nb_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;nbd kde bandwidth&quot;</span><span class="p">])</span></div>


<div class="viewcode-block" id="whole_well_view.update_plot">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.whole_well_view.update_plot">[docs]</a>
    <span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">temp_parameters</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
        <span class="n">temp_parameters</span><span class="p">[</span><span class="s2">&quot;min channels&quot;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_channels_nb_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="n">temp_parameters</span><span class="p">[</span><span class="s2">&quot;thresholding method&quot;</span><span class="p">]</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">th_method_nb_var</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="n">temp_parameters</span><span class="p">[</span><span class="s2">&quot;nbd kde bandwidth&quot;</span><span class="p">]</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nbd_kde_bandwidth_nb_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        
        <span class="c1"># Update the output folder path, as this might have changed since the original analysis</span>
        <span class="n">temp_parameters</span><span class="p">[</span><span class="s1">&#39;output path&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">folder</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">plot_network_bursts</span><span class="p">(</span><span class="n">parameters</span><span class="o">=</span><span class="n">temp_parameters</span><span class="p">)</span></div>


<div class="viewcode-block" id="whole_well_view.reset">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.whole_well_view.reset">[docs]</a>
    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_values</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_plot</span><span class="p">()</span></div>


<div class="viewcode-block" id="whole_well_view.plot_well_activity">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.whole_well_view.plot_well_activity">[docs]</a>
    <span class="k">def</span> <span class="nf">plot_well_activity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fig</span><span class="o">=</span><span class="n">well_electrodes_kde</span><span class="p">(</span><span class="n">outputpath</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">folder</span><span class="p">,</span> <span class="n">well</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">well</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="n">bandwidth</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">el_act_bw_entry</span><span class="o">.</span><span class="n">get</span><span class="p">()))</span>
        
        <span class="c1"># Check which colorscheme we have to use</span>
        <span class="n">axiscolour</span><span class="o">=</span><span class="s2">&quot;#586d97&quot;</span>
        <span class="n">bgcolor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_4</span>
        
        <span class="n">fig</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">bgcolor</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">bgcolor</span><span class="p">)</span>
            <span class="c1"># Change the other colours</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">axiscolour</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">axiscolour</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">side</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">]:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="n">side</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">axiscolour</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">axiscolour</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">axiscolour</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_title</span><span class="p">(),</span><span class="n">color</span><span class="o">=</span><span class="n">axiscolour</span><span class="p">)</span>

        <span class="n">plot_canvas</span> <span class="o">=</span> <span class="n">FigureCanvasTkAgg</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">electrode_activity_plot_frame</span><span class="p">)</span>  
        <span class="n">plot_canvas</span><span class="o">.</span><span class="n">get_tk_widget</span><span class="p">()</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nsew&#39;</span><span class="p">)</span>
        <span class="n">toolbarframe</span><span class="o">=</span><span class="n">ttk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">electrode_activity_plot_frame</span><span class="p">)</span>
        <span class="n">toolbarframe</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">toolbar</span> <span class="o">=</span> <span class="n">NavigationToolbar2Tk</span><span class="p">(</span><span class="n">plot_canvas</span><span class="p">,</span> <span class="n">toolbarframe</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">primary_1</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">_message_label</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">primary_1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">button</span> <span class="ow">in</span> <span class="n">toolbar</span><span class="o">.</span><span class="n">winfo_children</span><span class="p">():</span>
            <span class="n">button</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">primary_1</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">plot_canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span></div>


<div class="viewcode-block" id="whole_well_view.well_activity_update_plot">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.whole_well_view.well_activity_update_plot">[docs]</a>
    <span class="k">def</span> <span class="nf">well_activity_update_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_well_activity</span><span class="p">()</span></div>


<div class="viewcode-block" id="whole_well_view.reset_electrode_activity">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.whole_well_view.reset_electrode_activity">[docs]</a>
    <span class="k">def</span> <span class="nf">reset_electrode_activity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">el_act_bw_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">el_act_bw_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">def_bw_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">well_activity_update_plot</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="process_file_frame">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.process_file_frame">[docs]</a>
<span class="k">class</span> <span class="nc">process_file_frame</span><span class="p">(</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Allows the user to perform analysis on a single MEA experiment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>  <span class="c1"># Initialize the parent class</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">crashed</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progressfile</span><span class="o">=</span><span class="s1">&#39;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_file</span><span class="o">=</span><span class="s1">&#39;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">select_file_button</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Select a file&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">select_file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select_file_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">parametersframe</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">parametersframe</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">parametersframe</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">parametersframe</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">sampling_rate_label</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">parametersframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Sampling Rate:&quot;</span><span class="p">)</span>
        <span class="n">sampling_rate_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sampling_rate_entry</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">parametersframe</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sampling_rate_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="n">electrode_amnt_label</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">parametersframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Electrode amount:&quot;</span><span class="p">)</span>
        <span class="n">electrode_amnt_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">electrode_amnt_entry</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">parametersframe</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">electrode_amnt_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Start Analysis&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">start_analysis</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">return_button</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Return to Main Menu&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">parent</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">main_window</span><span class="p">),</span> <span class="n">fg_color</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">return_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="process_file_frame.select_file">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.process_file_frame.select_file">[docs]</a>
    <span class="k">def</span> <span class="nf">select_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">selectedfile</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">askopenfilename</span><span class="p">(</span><span class="n">filetypes</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;MEA data&quot;</span><span class="p">,</span> <span class="s2">&quot;*.h5&quot;</span><span class="p">)])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">selectedfile</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selected_file</span><span class="o">=</span><span class="n">selectedfile</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">select_file_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">selectedfile</span><span class="p">)</span></div>


<div class="viewcode-block" id="process_file_frame.call_library">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.process_file_frame.call_library">[docs]</a>
    <span class="k">def</span> <span class="nf">call_library</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">electrode_amnt</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">electrode_amnt_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
            <span class="n">sampling_rate</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sampling_rate_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
            <span class="n">analyse_wells</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_file</span><span class="p">,</span> <span class="n">electrode_amnt</span><span class="o">=</span><span class="n">electrode_amnt</span><span class="p">,</span> <span class="n">sampling_rate</span><span class="o">=</span><span class="n">sampling_rate</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Something went wrong during the analysis:</span><span class="se">\n</span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;cancel&quot;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crashed</span><span class="o">=</span><span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">return_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="process_file_frame.abort_analysis">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.process_file_frame.abort_analysis">[docs]</a>
    <span class="k">def</span> <span class="nf">abort_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">progressfile</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;abort&quot;</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Aborting analysis, please wait...&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="process_file_frame.start_analysis">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.process_file_frame.start_analysis">[docs]</a>
    <span class="k">def</span> <span class="nf">start_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Check things</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_file</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Please select a file&#39;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;cancel&quot;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sampling_rate</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sampling_rate_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
            <span class="n">electrode_amnt</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">electrode_amnt_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Please fill in the sampling rate and electrode amount.&#39;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;cancel&quot;</span><span class="p">,</span> <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">return_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>

        <span class="c1"># Create a popup for the progress</span>
        <span class="n">popup</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkToplevel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Progress&#39;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">popup</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">popup</span><span class="o">.</span><span class="n">iconbitmap</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">icon_path</span><span class="p">)))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

        <span class="n">popup</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">popup</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s2">&quot;WM_DELETE_WINDOW&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">abort_analysis</span><span class="p">())</span>

        <span class="n">progress_label</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">popup</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;The MEA data is being processed, please wait for the application to finish.&quot;</span><span class="p">)</span>
        <span class="n">progress_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">progressbar</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkProgressBar</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">popup</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;determinate&#39;</span><span class="p">,</span> <span class="n">progress_color</span><span class="o">=</span><span class="s2">&quot;#239b56&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
        <span class="n">progressbar</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
        <span class="n">progressbar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">progress_info</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">popup</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">progress_info</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="c1"># Start the analysis in a new thread</span>
        <span class="n">process</span><span class="o">=</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">call_library</span><span class="p">)</span>
        <span class="n">process</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="c1"># And keep track of the progress</span>
        <span class="n">start</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_file</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progressfile</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">/progress.npy&quot;</span>
        <span class="c1"># Remove potential pre-existing progressfile</span>
        <span class="k">try</span><span class="p">:</span> 
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">progressfile</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">currenttime</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="n">elapsed</span><span class="o">=</span><span class="nb">round</span><span class="p">(</span><span class="n">currenttime</span><span class="o">-</span><span class="n">start</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">progress</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">progressfile</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">progress</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;starting&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">crashed</span><span class="p">:</span>
                <span class="n">popup</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">progressfile</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">return_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="n">progress</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;done&#39;</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">elif</span> <span class="n">progress</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;starting&#39;</span><span class="p">:</span>
                <span class="n">progress_info</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Loading raw data, time elapsed: </span><span class="si">{</span><span class="n">elapsed</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">progress</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;rechunking&#39;</span><span class="p">:</span>
                <span class="n">progress_info</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Rechunking data to new chunk shape, time elapsed: </span><span class="si">{</span><span class="n">elapsed</span><span class="si">}</span><span class="s1"> seconds&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">progress</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;abort&#39;</span><span class="p">:</span>
                <span class="n">progress_info</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Aborting analysis, please wait...&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">progress</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;stopped&#39;</span><span class="p">:</span>
                <span class="n">popup</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">progressfile</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">return_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">progressbar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">progress</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">progress</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">progress_info</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Analyzing data, channel: </span><span class="si">{</span><span class="n">progress</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">progress</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">, time elapsed: </span><span class="si">{</span><span class="n">elapsed</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
        <span class="n">currenttime</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">elapsed</span><span class="o">=</span><span class="nb">round</span><span class="p">(</span><span class="n">currenttime</span><span class="o">-</span><span class="n">start</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">progressfile</span><span class="p">)</span>
        <span class="n">progress_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">progress_info</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Analysis finished in </span><span class="si">{</span><span class="n">elapsed</span><span class="si">}</span><span class="s2"> seconds.&quot;</span><span class="p">)</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s2">&quot;WM_DELETE_WINDOW&quot;</span><span class="p">,</span> <span class="n">popup</span><span class="o">.</span><span class="n">destroy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">return_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="batch_processing">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.batch_processing">[docs]</a>
<span class="k">class</span> <span class="nc">batch_processing</span><span class="p">(</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Allows the user to process multiple MEA experiments.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>  <span class="c1"># Initialize the parent class</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span>

        <span class="c1"># Configure grid layout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Different main frames</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_selection_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_selection_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nsew&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_selection_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_selection_frame</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_selection_frame</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_selection_frame</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="c1"># List to store selected file paths</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_files</span> <span class="o">=</span> <span class="p">[]</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot; Folder selection frame &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">folder_frame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_selection_frame</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">folder_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;ew&quot;</span><span class="p">)</span>
        
        <span class="c1"># Select folder button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select_folder_btn</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">folder_frame</span><span class="p">,</span> 
            <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Select Folder&quot;</span><span class="p">,</span> 
            <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">select_folder</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select_folder_btn</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>

        <span class="c1"># Treeview frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree_frame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_selection_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;nsew&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree_frame</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Vertical Scrollbar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_scrollbar</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkScrollbar</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tree_frame</span><span class="p">,</span> 
            <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_scrollbar</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;ns&#39;</span><span class="p">)</span>
        
        <span class="c1"># Horizontal Scrollbar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal_scrollbar</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkScrollbar</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tree_frame</span><span class="p">,</span> 
            <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;horizontal&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal_scrollbar</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;ew&#39;</span><span class="p">)</span>

        <span class="c1"># Treeview Customisation</span>
        <span class="n">bg_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree_frame</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s2">&quot;fg_color&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">text_color</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">_apply_appearance_mode</span><span class="p">(</span><span class="n">ctk</span><span class="o">.</span><span class="n">ThemeManager</span><span class="o">.</span><span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkLabel&quot;</span><span class="p">][</span><span class="s2">&quot;text_color&quot;</span><span class="p">])</span>
        <span class="n">selected_color</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">_apply_appearance_mode</span><span class="p">(</span><span class="n">ctk</span><span class="o">.</span><span class="n">ThemeManager</span><span class="o">.</span><span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkButton&quot;</span><span class="p">][</span><span class="s2">&quot;fg_color&quot;</span><span class="p">])</span>
        <span class="n">treestyle</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Style</span><span class="p">()</span>
        <span class="n">treestyle</span><span class="o">.</span><span class="n">theme_use</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
        <span class="n">treestyle</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s2">&quot;Treeview&quot;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="n">bg_color</span><span class="p">,</span> <span class="n">foreground</span><span class="o">=</span><span class="n">text_color</span><span class="p">,</span> <span class="n">fieldbackground</span><span class="o">=</span><span class="n">bg_color</span><span class="p">,</span> <span class="n">borderwidth</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">treestyle</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="s1">&#39;Treeview&#39;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;selected&#39;</span><span class="p">,</span> <span class="n">bg_color</span><span class="p">)],</span> <span class="n">foreground</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;selected&#39;</span><span class="p">,</span> <span class="n">selected_color</span><span class="p">)])</span>
        <span class="n">parent</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;&lt;TreeviewSelect&gt;&gt;&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">event</span><span class="p">:</span> <span class="n">parent</span><span class="o">.</span><span class="n">focus_set</span><span class="p">())</span>

        <span class="c1"># Treeview with scrollbars</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Treeview</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tree_frame</span><span class="p">,</span> 
            <span class="n">columns</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;fullpath&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">),</span> 
            <span class="n">selectmode</span><span class="o">=</span><span class="s2">&quot;extended&quot;</span><span class="p">,</span>
            <span class="n">yscrollcommand</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertical_scrollbar</span><span class="o">.</span><span class="n">set</span><span class="p">,</span>
            <span class="n">xscrollcommand</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_horizontal_scrollbar</span><span class="o">.</span><span class="n">set</span><span class="p">,</span>
            <span class="n">show</span><span class="o">=</span><span class="s1">&#39;tree&#39;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;nsew&quot;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">padx</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>

        <span class="c1"># Link scrollbars to Treeview</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_scrollbar</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">yview</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal_scrollbar</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">xview</span><span class="p">)</span>

        <span class="c1"># Configure treeview columns</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">heading</span><span class="p">(</span><span class="s2">&quot;#0&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Directory Structure&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s2">&quot;#0&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">stretch</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Selected tag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">tag_configure</span><span class="p">(</span><span class="s1">&#39;selected&#39;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="s1">&#39;#627747&#39;</span><span class="p">)</span>

        <span class="c1"># Print selected files button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print_files_btn</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file_selection_frame</span><span class="p">,</span> 
            <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Confirm Selection&quot;</span><span class="p">,</span> 
            <span class="n">command</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">confirm_selection</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print_files_btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">to_main_menu</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_selection_frame</span><span class="p">,</span> 
            <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Return to Main Menu&quot;</span><span class="p">,</span> 
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">parent</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">main_window</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="n">to_main_menu</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;news&#39;</span><span class="p">)</span>

        <span class="c1"># Bind events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;&lt;TreeviewOpen&gt;&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">open_folder</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;&lt;TreeviewSelect&gt;&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_selected</span><span class="p">)</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot; Process files frame &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_files_labels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progressbars</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">analysis_crashed</span><span class="o">=</span><span class="kc">False</span>     <span class="c1"># Flag to communicate if analysis has crashed with a file</span>

        <span class="c1"># Frames</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">process_files_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_files_frame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">process_files_frame</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_files_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_files_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_files_frame</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">process_files_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">process_files_frame</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">process_files_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">settings_and_progress_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">process_files_frame</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="s2">&quot;transparent&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings_and_progress_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings_and_progress_frame</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings_and_progress_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">analysis_settings_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">settings_and_progress_frame</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">analysis_settings_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">analysis_progress_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">settings_and_progress_frame</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">analysis_progress_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">analysis_progress_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="c1"># Analysis settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sampling_rate_label</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_settings_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Sampling rate:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sampling_rate_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sampling_rate_input</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_settings_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sampling_rate_input</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">electrode_amnt_label</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_settings_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Electrode amount:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">electrode_amnt_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">electrode_amnt_input</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_settings_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">electrode_amnt_input</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="c1"># Analysis and progress</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_analysis_button</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_progress_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Initiate Analysis&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">initiate_analysis</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_analysis_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">progressbar</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkProgressBar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_progress_frame</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;determinate&#39;</span><span class="p">,</span> <span class="n">progress_color</span><span class="o">=</span><span class="s2">&quot;#239b56&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progressbar</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progressbar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">abort_analysis_bool</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abort_analysis_button</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_progress_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Abort Analysis&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">abort_analysis_func</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abort_analysis_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abort_analysis_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_progress_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Return&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">parent</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">main_window</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>


    <span class="c1"># Select parent folder</span>
<div class="viewcode-block" id="batch_processing.select_folder">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.batch_processing.select_folder">[docs]</a>
    <span class="k">def</span> <span class="nf">select_folder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Clear existing tree</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">get_children</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_files</span><span class="o">=</span><span class="p">[]</span>

        <span class="c1"># Open folder selection dialog</span>
        <span class="n">folder_path</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">askdirectory</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">folder_path</span><span class="p">:</span>
            <span class="c1"># Populate tree with root folder</span>
            <span class="n">root_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">folder_path</span><span class="p">),</span> 
                                       <span class="n">values</span><span class="o">=</span><span class="p">(</span><span class="n">folder_path</span><span class="p">,</span> <span class="s2">&quot;Folder&quot;</span><span class="p">),</span> <span class="nb">open</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">populate_tree</span><span class="p">(</span><span class="n">root_id</span><span class="p">,</span> <span class="n">folder_path</span><span class="p">)</span></div>


<div class="viewcode-block" id="batch_processing.populate_tree">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.batch_processing.populate_tree">[docs]</a>
    <span class="k">def</span> <span class="nf">populate_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)):</span>
                <span class="n">full_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">full_path</span><span class="p">):</span>
                    <span class="c1"># Add folder</span>
                    <span class="n">folder_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> 
                                                 <span class="n">values</span><span class="o">=</span><span class="p">(</span><span class="n">full_path</span><span class="p">,</span> <span class="s2">&quot;Folder&quot;</span><span class="p">))</span>
                    <span class="c1"># Add a dummy child to enable expansion</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">folder_id</span><span class="p">,</span> <span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;placeholder&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Add file</span>
                    <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.h5&quot;</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> 
                                        <span class="n">values</span><span class="o">=</span><span class="p">(</span><span class="n">full_path</span><span class="p">,</span> <span class="s2">&quot;File&quot;</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">PermissionError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Permission denied for </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="batch_processing.open_folder">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.batch_processing.open_folder">[docs]</a>
    <span class="k">def</span> <span class="nf">open_folder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="c1"># Remove placeholder and populate actual contents when folder is opened</span>
        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">focus</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">get_children</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="ow">and</span> \
           <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">get_children</span><span class="p">(</span><span class="n">item</span><span class="p">)[</span><span class="mi">0</span><span class="p">])[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;placeholder&#39;</span><span class="p">:</span>
            <span class="c1"># Remove placeholder</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">get_children</span><span class="p">(</span><span class="n">item</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
            <span class="c1"># Populate actual contents</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">populate_tree</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span></div>


<div class="viewcode-block" id="batch_processing.deselect_all">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.batch_processing.deselect_all">[docs]</a>
    <span class="k">def</span> <span class="nf">deselect_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">selection</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">selection_remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span></div>


<div class="viewcode-block" id="batch_processing.add_selection">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.batch_processing.add_selection">[docs]</a>
    <span class="k">def</span> <span class="nf">add_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">item</span><span class="p">)[</span><span class="s1">&#39;tags&#39;</span><span class="p">])</span><span class="o">!=</span><span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">item</span><span class="p">)[</span><span class="s1">&#39;tags&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;selected&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selected_files</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="s2">&quot;selected&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selected_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span></div>


<div class="viewcode-block" id="batch_processing.item_selected">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.batch_processing.item_selected">[docs]</a>
    <span class="k">def</span> <span class="nf">item_selected</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">selected_item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">selection</span><span class="p">():</span>
            <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">selected_item</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">)</span>
            <span class="c1"># If the selected item is a file</span>
            <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;File&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_selection</span><span class="p">(</span><span class="n">selected_item</span><span class="p">)</span>
            <span class="c1"># If the selected item is a folder</span>
            <span class="k">elif</span> <span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;Folder&quot;</span><span class="p">:</span>
                <span class="n">children</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">get_children</span><span class="p">(</span><span class="n">selected_item</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">children</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;File&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.h5&quot;</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">add_selection</span><span class="p">(</span><span class="n">child</span><span class="p">)</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">deselect_all</span><span class="p">()</span></div>


<div class="viewcode-block" id="batch_processing.confirm_selection">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.batch_processing.confirm_selection">[docs]</a>
    <span class="k">def</span> <span class="nf">confirm_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_files_table</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkScrollableFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_files_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_files_table</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_files_table</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_files_table</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_files</span><span class="p">):</span>
            <span class="n">label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_files_table</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">corner_radius</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
            <span class="n">label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selected_files_labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
            <span class="n">progressbar</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkProgressBar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_files_table</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;determinate&#39;</span><span class="p">,</span> <span class="n">progress_color</span><span class="o">=</span><span class="s2">&quot;#239b56&quot;</span><span class="p">)</span>
            <span class="n">progressbar</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="n">progressbar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progressbars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">progressbar</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">process_files_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nsew&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_selection_frame</span><span class="o">.</span><span class="n">grid_forget</span><span class="p">()</span></div>


<div class="viewcode-block" id="batch_processing.call_library">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.batch_processing.call_library">[docs]</a>
    <span class="k">def</span> <span class="nf">call_library</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">electrode_amnt</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">electrode_amnt_input</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
            <span class="n">sampling_rate</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sampling_rate_input</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
            <span class="n">analyse_wells</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">electrode_amnt</span><span class="o">=</span><span class="n">electrode_amnt</span><span class="p">,</span> <span class="n">sampling_rate</span><span class="o">=</span><span class="n">sampling_rate</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progressbars</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">progress_color</span><span class="o">=</span><span class="s1">&#39;#922b21&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progressbars</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">analysis_crashed</span><span class="o">=</span><span class="kc">True</span></div>


<div class="viewcode-block" id="batch_processing.initiate_analysis">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.batch_processing.initiate_analysis">[docs]</a>
    <span class="k">def</span> <span class="nf">initiate_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_analysis_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abort_analysis_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_files</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">abort_analysis_bool</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">abort_analysis_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Aborted Analysis&quot;</span><span class="p">)</span>
                <span class="k">break</span>
            <span class="c1"># Start the analysis in another thread</span>

            <span class="n">file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

            <span class="n">process</span><span class="o">=</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">call_library</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">index</span><span class="p">))</span>
            <span class="n">process</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

            <span class="c1"># Read out the progress</span>
            <span class="n">progressfile</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">file</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">/progress.npy&#39;</span>

            <span class="c1"># Make sure there is no pre-existing progressfile</span>
            <span class="k">try</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">progressfile</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>

            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span> 
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_crashed</span><span class="p">:</span>
                        <span class="k">break</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">progress</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">progressfile</span><span class="p">)</span>
                        <span class="k">break</span>
                    <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">progress</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;done&#39;</span><span class="p">:</span>
                        <span class="k">break</span>
                <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_crashed</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">analysis_crashed</span><span class="o">=</span><span class="kc">False</span>
                    <span class="k">break</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">currentprogress</span><span class="o">=</span><span class="p">(</span><span class="n">progress</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">progress</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">progressbars</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">currentprogress</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progressbar</span><span class="o">.</span><span class="n">set</span><span class="p">((</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_files_labels</span><span class="p">))</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">abort_analysis_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;disabled&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">back_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="batch_processing.abort_analysis_func">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.batch_processing.abort_analysis_func">[docs]</a>
    <span class="k">def</span> <span class="nf">abort_analysis_func</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abort_analysis_bool</span><span class="o">=</span><span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abort_analysis_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Aborting analysis after current file&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abort_analysis_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;disabled&quot;</span><span class="p">)</span></div>
</div>




<div class="viewcode-block" id="compress_files">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.compress_files">[docs]</a>
<span class="k">class</span> <span class="nc">compress_files</span><span class="p">(</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Allows the user to compress/rechunk multiple files.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">select_file_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Select a file&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">openfiles</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select_file_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">to_main_frame_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Return to main menu&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">parent</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">main_window</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">to_main_frame_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">gzip_level_text</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;GZIP compression level: 1&quot;</span><span class="p">)</span>
        <span class="n">gzip_level_text</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">show_value</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="n">gzip_level_text</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;GZIP compression level: </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">slider_value</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">IntVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gzip_level_slider</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkSlider</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">slider_value</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">number_of_steps</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">show_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gzip_level_slider</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gzip_level_slider</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">lzf_selected</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gzip_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gzip_level_slider</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">compression_method</span><span class="o">=</span><span class="s1">&#39;lzf&#39;</span>

        <span class="k">def</span> <span class="nf">gzip_selected</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lzf_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gzip_level_slider</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">compression_method</span><span class="o">=</span><span class="s1">&#39;gzip&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lzf_var</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">IntVar</span><span class="p">()</span>
        <span class="n">lzf_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkCheckBox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;LZF&#39;</span><span class="p">,</span> <span class="n">onvalue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">offvalue</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lzf_var</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">lzf_selected</span><span class="p">)</span>
        <span class="n">lzf_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gzip_var</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">IntVar</span><span class="p">()</span>
        <span class="n">gzip_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkCheckBox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;GZIP&#39;</span><span class="p">,</span> <span class="n">onvalue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">offvalue</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gzip_var</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">gzip_selected</span><span class="p">)</span>
        <span class="n">gzip_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">compress_all</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">BooleanVar</span><span class="p">()</span>
        <span class="n">compress_all_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkCheckBox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Compress all files in folder&#39;</span><span class="p">,</span> <span class="n">onvalue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">offvalue</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compress_all</span><span class="p">)</span>
        <span class="n">compress_all_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compress_all</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Default values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lzf_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_file</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compression_method</span><span class="o">=</span><span class="s1">&#39;lzf&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compression_level</span><span class="o">=</span><span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">compress_files_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Start compression&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compress_files_function</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compress_files_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">abort_flag</span><span class="o">=</span><span class="kc">False</span>

<div class="viewcode-block" id="compress_files.openfiles">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.compress_files.openfiles">[docs]</a>
    <span class="k">def</span> <span class="nf">openfiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">selectedfile</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">askopenfilename</span><span class="p">(</span><span class="n">filetypes</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;MEA data&quot;</span><span class="p">,</span> <span class="s2">&quot;*.h5&quot;</span><span class="p">)])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">selectedfile</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selected_file</span><span class="o">=</span><span class="n">selectedfile</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">select_file_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">selectedfile</span><span class="p">)</span></div>


<div class="viewcode-block" id="compress_files.compress_files_function">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.compress_files.compress_files_function">[docs]</a>
    <span class="k">def</span> <span class="nf">compress_files_function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_file</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">compress_all</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="n">folder</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_file</span><span class="p">)</span>
            <span class="n">mea_files</span><span class="o">=</span><span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.h5&quot;</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mea_files</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_file</span><span class="p">]</span>

        <span class="n">popup</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkToplevel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;File Compression&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">popup</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">popup</span><span class="o">.</span><span class="n">iconbitmap</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">icon_path</span><span class="p">)))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        
        <span class="n">progressinfo</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">popup</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Compressing </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">mea_files</span><span class="p">)</span><span class="si">}</span><span class="s1"> file</span><span class="si">{</span><span class="s2">&quot;s&quot;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="n">mea_files</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">progressinfo</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">progressbarlength</span><span class="o">=</span><span class="mi">300</span>
        <span class="n">progressbar</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkProgressBar</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">popup</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">progressbarlength</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;determinate&#39;</span><span class="p">,</span> <span class="n">progress_color</span><span class="o">=</span><span class="s2">&quot;#239b56&quot;</span><span class="p">)</span>
        <span class="n">progressbar</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">progressbar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">info</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">popup</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">info</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">finishedfiles</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">popup</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">finishedfiles</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

        <span class="c1"># Aborting compression</span>
        <span class="k">def</span> <span class="nf">abort_compression</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">abort_flag</span><span class="o">=</span><span class="kc">True</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Aborting compression for further files...&quot;</span><span class="p">)</span>
            <span class="n">abort_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Aborting compression for further files...&quot;</span><span class="p">)</span>
            <span class="n">abort_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>

        <span class="n">abort_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">popup</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Abort compression&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">abort_compression</span><span class="p">)</span>
        <span class="n">abort_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s2">&quot;WM_DELETE_WINDOW&quot;</span><span class="p">,</span> <span class="n">abort_compression</span><span class="p">)</span>

        <span class="n">succesfiles</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">failedfiles</span><span class="o">=</span><span class="p">[]</span>
    

        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mea_files</span><span class="p">)):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">abort_flag</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">abort_flag</span><span class="o">=</span><span class="kc">False</span>
                <span class="n">popup</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
                <span class="k">return</span>
            <span class="n">info</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Compressing file </span><span class="si">{</span><span class="n">file</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2"> out of </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">mea_files</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Compressing </span><span class="si">{</span><span class="n">mea_files</span><span class="p">[</span><span class="n">file</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">rechunk_dataset</span><span class="p">(</span><span class="n">fileadress</span><span class="o">=</span><span class="n">mea_files</span><span class="p">[</span><span class="n">file</span><span class="p">],</span> <span class="n">compression_method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compression_method</span><span class="p">,</span> <span class="n">compression_level</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">compression_level</span><span class="p">,</span> <span class="n">always_compress_files</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">succesfiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mea_files</span><span class="p">[</span><span class="n">file</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not compress </span><span class="si">{</span><span class="n">mea_files</span><span class="p">[</span><span class="n">file</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                <span class="n">failedfiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mea_files</span><span class="p">[</span><span class="n">file</span><span class="p">])</span>
            <span class="n">currentprogress</span><span class="o">=</span><span class="p">((</span><span class="n">file</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">mea_files</span><span class="p">))</span>
            <span class="n">progressbar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">currentprogress</span><span class="p">)</span>
            <span class="n">finishedfiles_text</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">succesfiles</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">finishedfiles_text</span><span class="o">+=</span><span class="s2">&quot;Compressed files:</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">succesfiles</span><span class="p">)):</span>
                    <span class="n">finishedfiles_text</span><span class="o">+=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">succesfiles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">failedfiles</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">finishedfiles_text</span><span class="o">+=</span><span class="s2">&quot;Failed files:</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">failedfiles</span><span class="p">)):</span>
                    <span class="n">finishedfiles_text</span><span class="o">+=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">failedfiles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">finishedfiles</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">finishedfiles_text</span><span class="p">)</span>
        
        <span class="n">abort_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
        <span class="n">info</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Finished compression&quot;</span><span class="p">)</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s2">&quot;WM_DELETE_WINDOW&quot;</span><span class="p">,</span> <span class="n">popup</span><span class="o">.</span><span class="n">destroy</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="plotting_window">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.plotting_window">[docs]</a>
<span class="k">class</span> <span class="nc">plotting_window</span><span class="p">(</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Allows the user to combine multiple MEA experiments to generate plots and discern between healthy and diseased cultures.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span>

        <span class="c1"># Weights</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Plot frames</span>
        <span class="n">plotting_frame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="s1">&#39;transparent&#39;</span><span class="p">)</span>
        <span class="n">plotting_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">select_file_frame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_1</span><span class="p">)</span>
        <span class="n">select_file_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">select_file_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">features_over_time_frame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">plotting_frame</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_1</span><span class="p">)</span>
        <span class="n">features_over_time_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
        <span class="n">features_over_time_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">features_over_time_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">boxplot_frame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">plotting_frame</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_1</span><span class="p">)</span>
        <span class="n">boxplot_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">boxplot_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">boxplot_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>


        <span class="c1"># Selected files frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_files_frame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkScrollableFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_files_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="c1"># Label frames</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_labels_frame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_labels_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;new&#39;</span><span class="p">)</span>

        <span class="n">label_main_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="s1">&#39;transparent&#39;</span><span class="p">)</span>
        <span class="n">label_main_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">create_labels_frame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">label_main_frame</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_1</span><span class="p">)</span>
        <span class="n">create_labels_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
        <span class="n">create_labels_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">label_settings_frame</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">label_main_frame</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_1</span><span class="p">)</span>
        <span class="n">label_settings_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
        <span class="n">label_settings_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">labels_frame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">label_main_frame</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labels_frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labels_frame</span><span class="o">.</span><span class="n">grid_columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">label_main_frame</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">label_main_frame</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">label_main_frame</span><span class="o">.</span><span class="n">grid_rowconfigure</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_folder</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">well_buttons</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_buttons</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="o">=</span><span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_label</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_colors</span><span class="o">=</span><span class="n">get_defaultcolors</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">well_amnt</span><span class="o">=</span><span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">select_folder_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">select_file_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Select a folder&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">create_well_buttons</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select_folder_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="c1"># Features over time</span>
        <span class="n">fot_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">features_over_time_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Features over time&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">15</span><span class="p">))</span>
        <span class="n">fot_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="n">prefix_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">features_over_time_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;DIV Prefix:&quot;</span><span class="p">)</span>
        <span class="n">prefix_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">prefix_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">features_over_time_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefix_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">show_datapoints_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">features_over_time_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Show datapoints:&#39;</span><span class="p">)</span>
        <span class="n">show_datapoints_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">show_datapoints_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkCheckBox</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">features_over_time_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_datapoints_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">create_plot_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Plot Features over time&quot;</span><span class="p">,</span> <span class="n">master</span><span class="o">=</span><span class="n">features_over_time_frame</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">create_plots</span><span class="p">)</span>
        <span class="n">create_plot_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># Combine measurements</span>
        <span class="n">bp_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">boxplot_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Boxplots&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">15</span><span class="p">))</span>
        <span class="n">bp_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="n">bp_show_datapoints_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">boxplot_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Show datapoints:&#39;</span><span class="p">)</span>
        <span class="n">bp_show_datapoints_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bp_show_datapoints_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkCheckBox</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">boxplot_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bp_show_datapoints_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">discern_wells_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">boxplot_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Color wells:&#39;</span><span class="p">)</span>
        <span class="n">discern_wells_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">discern_wells_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkCheckBox</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">boxplot_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discern_wells_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">create_plot_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Create Boxplots&quot;</span><span class="p">,</span> <span class="n">master</span><span class="o">=</span><span class="n">boxplot_frame</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">create_boxplots</span><span class="p">)</span>
        <span class="n">create_plot_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>


        <span class="n">return_to_main</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">plotting_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Return to main menu&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">show_frame</span><span class="p">(</span><span class="n">main_window</span><span class="p">),</span> <span class="n">fg_color</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">gray_1</span><span class="p">)</span>
        <span class="n">return_to_main</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="c1"># Create labels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_label_entry</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkEntry</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">create_labels_frame</span><span class="p">,</span> <span class="n">placeholder_text</span><span class="o">=</span><span class="s2">&quot;Create a label; e.g.: </span><span class="se">\&#39;</span><span class="s2">control</span><span class="se">\&#39;</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_label_entry</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">new_label_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">create_labels_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Add Label&#39;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new_label</span><span class="p">)</span>
        <span class="n">new_label_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">save_label_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">label_settings_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Save Labels&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">save_labels</span><span class="p">)</span>
        <span class="n">save_label_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">save_label_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">label_settings_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Import Labels&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">import_labels</span><span class="p">)</span>
        <span class="n">save_label_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

        <span class="n">save_label_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="n">label_settings_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Reset Labels&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_labels</span><span class="p">)</span>
        <span class="n">save_label_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="plotting_window.save_labels">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.plotting_window.save_labels">[docs]</a>
    <span class="k">def</span> <span class="nf">save_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">asksaveasfilename</span><span class="p">(</span>
        <span class="n">defaultextension</span><span class="o">=</span><span class="s2">&quot;.json&quot;</span><span class="p">,</span>
        <span class="n">filetypes</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;JSON files&quot;</span><span class="p">,</span> <span class="s2">&quot;*.json&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;All files&quot;</span><span class="p">,</span> <span class="s2">&quot;*.*&quot;</span><span class="p">)],</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Save JSON File&quot;</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="p">:</span>
            <span class="k">return</span>
        
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="p">,</span> <span class="n">json_file</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

        <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Labels succesfully saved at </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;check&quot;</span><span class="p">,</span> <span class="n">option_1</span><span class="o">=</span><span class="s2">&quot;Ok&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Saved Labels&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="plotting_window.import_labels">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.plotting_window.import_labels">[docs]</a>
    <span class="k">def</span> <span class="nf">import_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">askopenfilename</span><span class="p">(</span>
            <span class="n">filetypes</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;JSON files&quot;</span><span class="p">,</span> <span class="s2">&quot;*.json&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;All files&quot;</span><span class="p">,</span> <span class="s2">&quot;*.*&quot;</span><span class="p">)],</span>  <span class="c1"># File type filters</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Open JSON File&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
            <span class="n">imported_labels</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_labels</span><span class="p">(</span><span class="n">imported_labels</span><span class="p">)</span></div>


<div class="viewcode-block" id="plotting_window.set_labels">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.plotting_window.set_labels">[docs]</a>
    <span class="k">def</span> <span class="nf">set_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">labels</span><span class="p">):</span>
        <span class="c1"># Reset labels</span>
        <span class="k">for</span> <span class="n">label_button</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_buttons</span><span class="p">:</span>
            <span class="n">label_button</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_buttons</span><span class="o">=</span><span class="p">[]</span>

        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">labels</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_label_button</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="o">=</span><span class="n">labels</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_button_colours</span><span class="p">()</span></div>


<div class="viewcode-block" id="plotting_window.reset_labels">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.plotting_window.reset_labels">[docs]</a>
    <span class="k">def</span> <span class="nf">reset_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_labels</span><span class="p">({})</span></div>


<div class="viewcode-block" id="plotting_window.create_plots">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.plotting_window.create_plots">[docs]</a>
    <span class="k">def</span> <span class="nf">create_plots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Perform checks</span>
        <span class="n">valid_groups</span><span class="o">=</span><span class="kc">False</span>
        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="p">[</span><span class="n">label</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">valid_groups</span><span class="o">=</span><span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">valid_groups</span><span class="p">:</span>
            <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span>
                              <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Please create at least one label, and assign at least one well to it.&#39;</span><span class="p">,</span>
                              <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;cancel&quot;</span><span class="p">,</span>
                              <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span>
                              <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Please define the prefix that is used to indicate the age of the neurons, e.g. DIV, t, day&#39;</span><span class="p">,</span>
                              <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;cancel&quot;</span><span class="p">,</span>
                              <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># Call library</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">asksaveasfilename</span><span class="p">(</span>
            <span class="n">defaultextension</span><span class="o">=</span><span class="s2">&quot;.pdf&quot;</span><span class="p">,</span>
            <span class="n">filetypes</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;PDF files&quot;</span><span class="p">,</span> <span class="s2">&quot;*.pdf&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;All files&quot;</span><span class="p">,</span> <span class="s2">&quot;*.*&quot;</span><span class="p">)],</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Save PDF File&quot;</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="p">:</span>
                <span class="k">return</span>

            <span class="n">pdf_path</span><span class="o">=</span><span class="n">features_over_time</span><span class="p">(</span><span class="n">folder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_folder</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="p">),</span> <span class="n">div_prefix</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix_entry</span><span class="o">.</span><span class="n">get</span><span class="p">()),</span> <span class="n">output_fileadress</span><span class="o">=</span><span class="n">file_path</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">default_colors</span><span class="p">,</span> <span class="n">show_datapoints</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_datapoints_entry</span><span class="o">.</span><span class="n">get</span><span class="p">()))</span>
            <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Figures succesfully saved at </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;check&quot;</span><span class="p">,</span> <span class="n">option_1</span><span class="o">=</span><span class="s2">&quot;Ok&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Saved Figures&quot;</span><span class="p">)</span>
            <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;file://</span><span class="si">{</span><span class="n">pdf_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span>
                              <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Something went wrong while creating the plots&#39;</span><span class="p">,</span>
                              <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;cancel&quot;</span><span class="p">,</span>
                              <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
            
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span></div>


<div class="viewcode-block" id="plotting_window.create_boxplots">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.plotting_window.create_boxplots">[docs]</a>
    <span class="k">def</span> <span class="nf">create_boxplots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># check if there are groups that contain wells</span>
        <span class="n">valid_groups</span><span class="o">=</span><span class="kc">False</span>
        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="p">[</span><span class="n">label</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">valid_groups</span><span class="o">=</span><span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">valid_groups</span><span class="p">:</span>
            <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span>
                              <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Please create at least one label, and assign at least one well to it.&#39;</span><span class="p">,</span>
                              <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;cancel&quot;</span><span class="p">,</span>
                              <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
            <span class="k">return</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">asksaveasfilename</span><span class="p">(</span>
            <span class="n">defaultextension</span><span class="o">=</span><span class="s2">&quot;.pdf&quot;</span><span class="p">,</span>
            <span class="n">filetypes</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;PDF files&quot;</span><span class="p">,</span> <span class="s2">&quot;*.pdf&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;All files&quot;</span><span class="p">,</span> <span class="s2">&quot;*.*&quot;</span><span class="p">)],</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Save PDF File&quot;</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="p">:</span>
                <span class="k">return</span>
            
            <span class="n">pdf_path</span><span class="o">=</span><span class="n">combined_feature_boxplots</span><span class="p">(</span><span class="n">folder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_folder</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="p">),</span> <span class="n">output_fileadress</span><span class="o">=</span><span class="n">file_path</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">default_colors</span><span class="p">,</span> <span class="n">show_datapoints</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bp_show_datapoints_entry</span><span class="o">.</span><span class="n">get</span><span class="p">()),</span> <span class="n">discern_wells</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">discern_wells_entry</span><span class="o">.</span><span class="n">get</span><span class="p">()),</span> <span class="n">well_amnt</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">well_amnt</span><span class="p">)</span>
            <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;file://</span><span class="si">{</span><span class="n">pdf_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Figures succesfully saved at </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;check&quot;</span><span class="p">,</span> <span class="n">option_1</span><span class="o">=</span><span class="s2">&quot;Ok&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Saved Figures&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span>
                              <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Something went wrong while creating the boxplots&#39;</span><span class="p">,</span>
                              <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;cancel&quot;</span><span class="p">,</span>
                              <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span></div>




<div class="viewcode-block" id="plotting_window.set_selected_label">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.plotting_window.set_selected_label">[docs]</a>
    <span class="k">def</span> <span class="nf">set_selected_label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_label</span><span class="o">=</span><span class="n">label</span></div>


<div class="viewcode-block" id="plotting_window.create_label_button">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.plotting_window.create_label_button">[docs]</a>
    <span class="k">def</span> <span class="nf">create_label_button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
        <span class="n">label_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">labels_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set_selected_label</span><span class="p">,</span> <span class="n">label</span><span class="p">),</span> <span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">default_colors</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_buttons</span><span class="p">)])</span>
        <span class="n">label_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_buttons</span><span class="p">),</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_buttons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="p">[</span><span class="n">label</span><span class="p">]</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_label_entry</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span></div>


<div class="viewcode-block" id="plotting_window.new_label">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.plotting_window.new_label">[docs]</a>
    <span class="k">def</span> <span class="nf">new_label</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_label_entry</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">label</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_label_button</span><span class="p">(</span><span class="n">label</span><span class="p">)</span></div>


<div class="viewcode-block" id="plotting_window.update_button_colours">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.plotting_window.update_button_colours">[docs]</a>
    <span class="k">def</span> <span class="nf">update_button_colours</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">well_button</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">well_buttons</span><span class="p">:</span>
            <span class="n">well_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">theme</span><span class="p">[</span><span class="s2">&quot;CTkButton&quot;</span><span class="p">][</span><span class="s2">&quot;fg_color&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">for</span> <span class="n">well</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="p">[</span><span class="n">key</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">well_buttons</span><span class="p">[</span><span class="n">well</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">default_colors</span><span class="p">[</span><span class="n">index</span><span class="p">])</span></div>


<div class="viewcode-block" id="plotting_window.well_button_func">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.plotting_window.well_button_func">[docs]</a>
    <span class="k">def</span> <span class="nf">well_button_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="c1"># If the label was already selected, remove the selection</span>
        <span class="k">if</span> <span class="n">button</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_label</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_label</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">button</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># First remove well from all labels</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">button</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="p">[</span><span class="n">key</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">button</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_label</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">button</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assigned_labels</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_button_colours</span><span class="p">()</span></div>


<div class="viewcode-block" id="plotting_window.create_well_buttons">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.plotting_window.create_well_buttons">[docs]</a>
    <span class="k">def</span> <span class="nf">create_well_buttons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">folder</span><span class="o">=</span><span class="n">filedialog</span><span class="o">.</span><span class="n">askdirectory</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">folder</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">well_amnts</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">file_names</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;Features.csv&quot;</span><span class="p">):</span>
                    <span class="n">data</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">file</span><span class="p">))</span>
                    <span class="n">well_amnts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
                    <span class="n">file_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">file</span><span class="p">))</span><span class="o">.</span><span class="n">stem</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">well_amnts</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span>
                              <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Not enough features-files found. Minimum amount is 1&#39;</span><span class="p">,</span>
                              <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;cancel&quot;</span><span class="p">,</span>
                              <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">well_amnts</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">well_amnts</span><span class="p">)):</span>
            <span class="n">CTkMessagebox</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span>
                              <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Not all experiments have the same amount of wells, please remove the exceptions from the folder.&#39;</span><span class="p">,</span>
                              <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;cancel&quot;</span><span class="p">,</span>
                              <span class="n">wraplength</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
            <span class="k">return</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">well_amnt</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">well_amnts</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_folder</span><span class="o">=</span><span class="n">folder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select_folder_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_folder</span><span class="p">)</span>
        <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">calculate_optimal_grid</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">well_amnts</span><span class="p">))</span>
        <span class="n">counter</span><span class="o">=</span><span class="mi">1</span>

        <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
                <span class="n">well_button</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">assign_labels_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">counter</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">well_button_func</span><span class="p">,</span> <span class="n">counter</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">25</span><span class="p">))</span>
                <span class="n">well_button</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">h</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nesw&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">well_buttons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">well_button</span><span class="p">)</span>
                <span class="n">counter</span><span class="o">+=</span><span class="mi">1</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">file_names</span><span class="p">):</span>
            <span class="n">file_label</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_files_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">file</span><span class="p">)</span>
            <span class="n">file_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">select_folder_button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span></div>
</div>


<div class="viewcode-block" id="MEA_GUI">
<a class="viewcode-back" href="../../CureQ.html#CureQ.mea_analysis_tool.MEA_GUI">[docs]</a>
<span class="k">def</span> <span class="nf">MEA_GUI</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Launches the graphical user interface (GUI) of the MEA Analysis Tool.</span>

<span class="sd">    Always launch the function with an &quot;if __name__ == &#39;__main__&#39;:&quot; guard as follows:</span>
<span class="sd">        if __name__ == &quot;__main__&quot;:</span>
<span class="sd">            MEA_GUI()</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">app</span> <span class="o">=</span> <span class="n">MainApp</span><span class="p">()</span>
    <span class="n">app</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span></div>



<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">MEA_GUI</span><span class="p">()</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, K.J. van Beem.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>